# OpenClaw Webhooksï¼ˆWebhook å›å‘¼ï¼‰

OpenClaw æ”¯æ´åœ¨ç‰¹å®šå·¥ä½œå®Œæˆå¾Œï¼Œå°‡çµæœä»¥ **HTTP webhook** å½¢å¼æŠ•éåˆ°å¤–éƒ¨ç³»çµ±ã€‚

æœ¬æ–‡èšç„¦æ–¼æœ€å¸¸è¦‹ä¸”æœ€å¯¦ç”¨çš„å ´æ™¯ï¼š**Cron ä»»å‹™å®Œæˆå¾Œçš„ delivery webhook å›å‘¼**ã€‚

---

## æ¦‚è¿°

- webhook ä¸»è¦ç”¨æ–¼ï¼šCron job å®Œæˆå¾Œï¼Œå°‡ã€Œæœ¬æ¬¡ run çš„å®Œæˆäº‹ä»¶ã€POST åˆ°ä½ çš„ç«¯é»ï¼ˆè‡ªå»º API / n8n / Zapier ç­‰ï¼‰
- å»ºè­°æ­é…ï¼š`sessionTarget: isolated` + `payload.kind: agentTurn`
- è¨­è¨ˆé‡é»ï¼šç¶²è·¯å¯é”æ€§ã€å®‰å…¨æ€§é©—è­‰ã€å¯é æ€§ï¼ˆå†ªç­‰/å®¹éŒ¯ï¼‰

---

## è§£æ±ºçš„å•é¡Œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æ²’æœ‰ webhook æ™‚çš„ç—›é»                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ç—›é» 1ï¼šçµæœåªèƒ½ç•™åœ¨ OpenClaw å…§éƒ¨                                          â”‚
â”‚    â€¢ éœ€è¦æ‰‹å‹•æŸ¥çœ‹ cron runs æ‰çŸ¥é“æˆåŠŸ/å¤±æ•—                                 â”‚
â”‚    â€¢ é›£ä»¥è‡ªå‹•ä¸²æ¥å¤–éƒ¨æµç¨‹ï¼ˆä¾‹å¦‚ï¼šå»ºç«‹å·¥å–®ã€å¯«å…¥è³‡æ–™åº«ã€è§¸ç™¼é€šçŸ¥ï¼‰            â”‚
â”‚                                                                             â”‚
â”‚  ç—›é» 2ï¼šç¼ºä¹çµ±ä¸€çš„äº‹ä»¶å‡ºå£                                                 â”‚
â”‚    â€¢ ä¸åŒä»»å‹™å„è‡ªæ¡ç”¨ä¸åŒé€šçŸ¥æ–¹å¼                                           â”‚
â”‚    â€¢ æ•´é«”ç›£æ§èˆ‡å‘Šè­¦é›£ä»¥æ¨™æº–åŒ–                                               â”‚
â”‚                                                                             â”‚
â”‚  ç—›é» 3ï¼šè‡ªå‹•åŒ–æµç¨‹æ–·è£‚                                                     â”‚
â”‚    â€¢ ç„¡æ³•åœ¨ä»»å‹™å®Œæˆå¾Œç«‹å³è§¸ç™¼ä¸‹ä¸€æ­¥                                         â”‚
â”‚    â€¢ éœ€è¦é¡å¤–è¼ªè©¢æˆ–äººå·¥ä»‹å…¥                                                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Webhook å¸¶ä¾†çš„åƒ¹å€¼                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  âœ“ è‡ªå‹•ä¸²æ¥ï¼šrun å®Œæˆå¾Œç«‹å³æŠŠçµæœé€åˆ°ä½ çš„ç³»çµ±                               â”‚
â”‚  âœ“ æ¨™æº–å‡ºå£ï¼šç”¨ HTTP POST çµ±ä¸€æ‰¿æ¥æ‰€æœ‰ä»»å‹™å®Œæˆäº‹ä»¶                          â”‚
â”‚  âœ“ å¯ç›£æ§ï¼šæ¥æ”¶ç«¯å¯é›†ä¸­è¨˜éŒ„ã€å‘Šè­¦ã€é‡è©¦ç­–ç•¥                                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Cron delivery webhook æ¶æ§‹                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                         â”‚
â”‚   â”‚   Gateway     â”‚                                                         â”‚
â”‚   â”‚ Cron Schedulerâ”‚                                                         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                         â”‚
â”‚          â”‚                                                                  â”‚
â”‚          â–¼                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      runs      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚  Cron Job     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Agent Execution        â”‚              â”‚
â”‚   â”‚ (schedule)    â”‚               â”‚ (isolated session)      â”‚              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚          â”‚                                    â”‚                            â”‚
â”‚          â”‚ finished run event (HTTP POST)     â”‚                            â”‚
â”‚          â–¼                                    â–¼                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚ Your Webhook Endpoint â”‚         â”‚  Run Result / Error  â”‚               â”‚
â”‚   â”‚ (HTTPS)               â”‚         â”‚  (JSON event body)   â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒæ¦‚å¿µ

### Delivery Modes

åœ¨ cron job ä¸­è¨­å®š `delivery` ä»¥æ§åˆ¶çµæœå¦‚ä½•æŠ•éï¼š

- `none`ï¼šä¸æŠ•é
- `announce`ï¼šæŠ•éåˆ°èŠå¤©é »é“
- `webhook`ï¼šæŠ•éåˆ° HTTP endpoint

> å¯¦éš›å¯ç”¨æ¨¡å¼èˆ‡æ¬„ä½ä»¥ Gateway ç‰ˆæœ¬èˆ‡ cron schema ç‚ºæº–ã€‚

### `sessionTarget` èˆ‡ `payload.kind` é™åˆ¶

- `sessionTarget: "main"` **å¿…é ˆ**æ­é… `payload.kind: "systemEvent"`
- `sessionTarget: "isolated"` **å¿…é ˆ**æ­é… `payload.kind: "agentTurn"`

### Delivery æ”¯æ´ç¯„åœ

- ä¸€èˆ¬æƒ…æ³ä¸‹ï¼Œ`delivery`ï¼ˆåŒ…å« `announce` / `webhook`ï¼‰ä¸»è¦ç”¨æ–¼ **isolated** çš„ cron job run çµæœæŠ•éã€‚
- è‹¥ä½ ç™¼ç¾ `main` session çš„ job ç„¡æ³•ä½¿ç”¨ `delivery`ï¼Œè«‹ä»¥ cron schema/ç‰ˆæœ¬è¡Œç‚ºç‚ºæº–ã€‚

---

## ä½¿ç”¨ç¯„ä¾‹

### ç¯„ä¾‹ 1ï¼šæ¯æ—¥æ‘˜è¦ï¼ˆå®Œæˆå¾Œ webhook æŠ•éï¼‰

```json
{
  "name": "daily-summary",
  "schedule": { "kind": "cron", "expr": "0 9 * * *", "tz": "America/New_York" },
  "payload": {
    "kind": "agentTurn",
    "message": "æ•´ç†ä»Šæ—¥é‡é»èˆ‡å¾…è¾¦ï¼Œè¼¸å‡ºç²¾ç°¡æ‘˜è¦ã€‚",
    "timeoutSeconds": 120
  },
  "delivery": {
    "mode": "webhook",
    "to": "https://example.com/openclaw/webhook"
  },
  "sessionTarget": "isolated",
  "enabled": true
}
```

---

## å¯¦ä½œå»ºè­°

### å®‰å…¨æ€§

- **åªç”¨ HTTPS**
- **åŠ å…¥é©—è­‰**ï¼ˆæ“‡ä¸€æˆ–æ··ç”¨ï¼‰
  - åœ¨ URL å¸¶ tokenï¼ˆä¾‹å¦‚ `?token=...`ï¼‰
  - åœ¨ HTTP header é©—è­‰ï¼ˆè¼ƒä½³ï¼Œè‹¥æ¥æ”¶ç«¯/å¹³å°å¯è¨­å®šï¼‰
- **é‡æ”¾æ”»æ“Šé˜²è­·**ï¼šä»¥ `(jobId, runId)` æˆ–ç­‰åƒ¹è­˜åˆ¥åšå»é‡

### å¯é æ€§

- Endpoint å»ºè­°å¿«é€Ÿå› `2xx`ï¼ŒæŠŠè€—æ™‚è™•ç†ä¸Ÿåˆ° background job / queue
- æ¥æ”¶ç«¯éœ€èƒ½å®¹å¿é‡é€èˆ‡é †åºä¸ä¿è­‰ï¼ˆå†ªç­‰è¨­è¨ˆï¼‰

---

## é™åˆ¶èˆ‡æœ€ä½³å¯¦è¸

| é …ç›® | é™åˆ¶ | å»ºè­° |
|------|------|------|
| ç¶²è·¯å¯é”æ€§ | Gateway å¿…é ˆèƒ½é€£åˆ°ä½ çš„ endpointï¼ˆDNS/é˜²ç«ç‰†/NAT çš†å¯èƒ½é€ æˆå¤±æ•—ï¼‰ | å„ªå…ˆä½¿ç”¨å…¬ç¶² HTTPS endpointï¼Œå¿…è¦æ™‚é€éåå‘ä»£ç†æˆ– tunnel |
| å›æ‡‰æ™‚é–“ | Endpoint éæ…¢å¯èƒ½å°è‡´æŠ•é timeout æˆ–å¤±æ•— | ç«‹å³å› `2xx`ï¼Œè€—æ™‚è™•ç†ä¸ŸèƒŒæ™¯ä»»å‹™ |
| Payload schema | JSON æ¬„ä½å¯èƒ½éš¨ç‰ˆæœ¬æ¼”é€² | å®Œæ•´è¨˜éŒ„åŸå§‹ JSONï¼ŒåªæŠ½å–å¿…è¦æ¬„ä½ |
| é‡é€/é‡è¤‡äº‹ä»¶ | äº‹ä»¶å¯èƒ½é‡é€æˆ–é‡è¤‡æŠ•é | ä»¥ `(jobId, runId)` æˆ–ç­‰åƒ¹ key åšå†ªç­‰å»é‡ |
| å®‰å…¨æ€§ | æœªé©—è­‰ä¾†æºå®¹æ˜“è¢«å½é€ å‘¼å« | ä½¿ç”¨ token/header é©—è­‰ï¼›å¿…è¦æ™‚é™åˆ¶ IP/åŠ  WAF |
| å¯è§€æ¸¬æ€§ | åªçœ‹ OpenClaw ç«¯ä¸æ˜“å®šä½å•é¡Œ | æ¥æ”¶ç«¯ä¿ç•™ request logï¼ˆå«æ™‚é–“ã€ç‹€æ…‹ç¢¼ã€body hashï¼‰ |

---

## æœ€å°æ¥æ”¶ç«¯ç¯„ä¾‹ï¼ˆNode.js / Expressï¼‰

```js
import express from "express";

const app = express();
app.use(express.json({ limit: "2mb" }));

app.post("/openclaw/webhook", (req, res) => {
  // TODO: é©—è­‰ token / header
  console.log("OpenClaw cron event:", JSON.stringify(req.body));
  res.sendStatus(200);
});

app.listen(3000, () => console.log("listening on :3000"));
```

---

## å¸¸è¦‹å•é¡Œ

### Q1ï¼šWebhook payload çš„ JSON æ¬„ä½æ˜¯å¦å›ºå®šï¼Ÿ

**Aï¼š**ä¸ä¿è­‰ã€‚å»ºè­°æ¥æ”¶ç«¯å®Œæ•´è¨˜éŒ„åŸå§‹ JSONï¼Œä¸¦åªæŠ½å–å¿…è¦æ¬„ä½ï¼›é¿å…å°æœªä¿è­‰çš„æ¬„ä½åšåš´æ ¼ schema ç¶å®šã€‚

### Q2ï¼šå¦‚ä½•é¿å…åŒä¸€å€‹ run é‡è¤‡è§¸ç™¼é€ æˆé‡è¤‡è™•ç†ï¼Ÿ

**Aï¼š**æ¥æ”¶ç«¯è«‹ä»¥ `(jobId, runId)` åšå»é‡ï¼ˆå†ªç­‰ï¼‰ï¼Œé‡è¤‡äº‹ä»¶ç›´æ¥å¿½ç•¥ã€‚

### Q3ï¼šWebhook endpoint éœ€è¦å›å‚³ä»€éº¼ï¼Ÿ

**Aï¼š**å»ºè­°å› `2xx`ï¼ˆä¾‹å¦‚ 200/204ï¼‰ä¸”ç›¡é‡å¿«é€Ÿå›æ‡‰ã€‚è‹¥æ¥æ”¶ç«¯éœ€è¦åšè€—æ™‚è™•ç†ï¼Œè«‹æ”¹ç‚ºå…ˆå…¥ queue/èƒŒæ™¯ä»»å‹™ã€‚

---

## å·²çŸ¥å•é¡Œï¼ˆOpen Issuesï¼‰

> æœ¬ç¯€ç”¨æ–¼å½™æ•´ webhook delivery ç›¸é—œçš„å·²çŸ¥å•é¡Œèˆ‡éœ€æ±‚ã€‚è‹¥ä½ é‡åˆ°å¯é‡ç¾çš„ç‹€æ³ï¼Œå»ºè­°åœ¨ OpenClaw æˆ– claw-info å¦é–‹ issue ä¸¦è£œä¸Šé€£çµã€‚

### ğŸ”´ Bugs

| Issue | æ¨™é¡Œ | èªªæ˜ |
|-------|------|------|
| [#19154](https://github.com/openclaw/openclaw/issues/19154) | Cron lastStatus: "ok" æ©è“‹ delivery å¤±æ•— | Agent åŸ·è¡ŒæˆåŠŸä½†æŠ•éå¤±æ•—æ™‚ï¼Œç‹€æ…‹ä»é¡¯ç¤º okï¼Œé›£ä»¥ç›£æ§èˆ‡å‘Šè­¦ |
| [#17905](https://github.com/openclaw/openclaw/issues/17905) | Cron delivery / æ’ç¨‹å¤šé …å•é¡Œå½™æ•´ | åŒ…å« channel è§£æã€éé è¨­ agentã€éœé»˜å¤±æ•—ç­‰å•é¡Œçš„å½™æ•´è¿½è¹¤ |

### ğŸŸ¢ Feature Requests

| Issue | æ¨™é¡Œ | èªªæ˜ |
|-------|------|------|
| [#9465](https://github.com/openclaw/openclaw/issues/9465) | Cron Job Hooks System | éœ€æ±‚ï¼šæä¾› Cron job hooks/äº‹ä»¶ç³»çµ±ï¼ˆå®Œæˆ/å¤±æ•—ç­‰ï¼‰ä»¥ä¾¿æ•´åˆå¤–éƒ¨æµç¨‹ |
| [#19169](https://github.com/openclaw/openclaw/issues/19169) | Auto-cleanup for cron job sessions | éœ€æ±‚ï¼šcron job åŸ·è¡Œå¾Œè‡ªå‹•æ¸…ç†/å›æ”¶ sessionï¼Œé¿å…é•·æœŸç´¯ç© |
| [#7952](https://github.com/openclaw/openclaw/issues/7952) | Allow specifying agentId in webhook | éœ€æ±‚ï¼šåœ¨ webhook hook é¡å‹ä¸­å…è¨±æŒ‡å®š agentIdï¼ˆæå‡å¯æ§æ€§ï¼‰ |

---

## æ›´æ–°ç´€éŒ„

- **2026-02-18**ï¼šæ–‡ä»¶å»ºç«‹ï¼›æ–°å¢ã€Œé™åˆ¶èˆ‡æœ€ä½³å¯¦è¸ / å·²çŸ¥å•é¡Œã€ç« ç¯€

---

*æœ€å¾Œæ›´æ–°ï¼š2026-02-18*
