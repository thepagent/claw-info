# OpenClaw Sandbox æ·±åº¦è§£æ

## æ¦‚è¿°

OpenClaw Sandbox æ˜¯ä¸€å€‹åŸºæ–¼ Docker çš„éš”é›¢åŸ·è¡Œç’°å¢ƒï¼Œç”¨æ–¼ä¿è­·ä¸»æ©Ÿç³»çµ±å…å— AI Agent æ½›åœ¨å±éšªæ“ä½œçš„å½±éŸ¿ã€‚

**é¦–æ¬¡å¼•å…¥ç‰ˆæœ¬ï¼š** `2026.1.8`

---

## è§£æ±ºçš„å•é¡Œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           æ²’æœ‰ Sandbox çš„é¢¨éšª                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   User: "å¹«æˆ‘æ•´ç† ~/Downloads"                                              â”‚
â”‚                        â”‚                                                    â”‚
â”‚                        â–¼                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚   Agent     â”‚â”€â”€â”€â–¶â”‚  exec: rm -rf ~/*   (æ¨¡å‹å¹»è¦º/æƒ¡æ„ prompt)      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                       â”‚                                     â”‚
â”‚                                       â–¼                                     â”‚
â”‚                              ğŸ’¥ æ•´å°é›»è…¦æ¯€äº†                                â”‚
â”‚                                                                             â”‚
â”‚   é¢¨éšªä¾†æºï¼š                                                                â”‚
â”‚   â€¢ æ¨¡å‹å¹»è¦º (Hallucination) - ç”¢ç”ŸéŒ¯èª¤æŒ‡ä»¤                                â”‚
â”‚   â€¢ Prompt Injection - æƒ¡æ„è¼¸å…¥èª˜å°åŸ·è¡Œå±éšªæŒ‡ä»¤                            â”‚
â”‚   â€¢ å·¥å…·æ¿«ç”¨ - Agent æœ‰å®Œæ•´ Host æ¬Šé™                                      â”‚
â”‚   â€¢ è³‡æ–™å¤–æ´© - å¯è®€å– ~/.ssh, ~/.aws ç­‰æ•æ„Ÿæª”æ¡ˆ                            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         OpenClaw Sandbox æ¶æ§‹                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                           â”‚
â”‚   â”‚   Agent     â”‚                                                           â”‚
â”‚   â”‚  (Gateway)  â”‚                                                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                                           â”‚
â”‚          â”‚                                                                  â”‚
â”‚          â–¼                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚                    Sandbox Mode åˆ¤æ–·                              â”‚      â”‚
â”‚   â”‚  â€¢ off      â†’ ç›´æ¥åœ¨ Host åŸ·è¡Œ                                   â”‚      â”‚
â”‚   â”‚  â€¢ non-main â†’ åªæœ‰éä¸» session é€² sandbox                        â”‚      â”‚
â”‚   â”‚  â€¢ all      â†’ æ‰€æœ‰ session éƒ½é€² sandbox                          â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚          â”‚                                                                  â”‚
â”‚          â–¼                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚                    Docker Container                               â”‚      â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â”‚
â”‚   â”‚  â”‚  debian:bookworm-slim (é è¨­)                               â”‚  â”‚      â”‚
â”‚   â”‚  â”‚                                                            â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  å®‰å…¨è¨­å®šï¼š                                                â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  â€¢ --read-only (å”¯è®€æ ¹ç›®éŒ„)                                â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  â€¢ --cap-drop ALL (ç§»é™¤æ‰€æœ‰ capabilities)                  â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  â€¢ --security-opt no-new-privileges                        â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  â€¢ --pids-limit (é™åˆ¶ process æ•¸é‡)                        â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  â€¢ --memory / --cpus (è³‡æºé™åˆ¶)                            â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  â€¢ seccomp / apparmor profiles                             â”‚  â”‚      â”‚
â”‚   â”‚  â”‚                                                            â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  æ›è¼‰ï¼š                                                    â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  â€¢ workspace â†’ /workspace (:ro æˆ– :rw)                     â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  â€¢ tmpfs â†’ /tmp, /var/tmp                                  â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  â€¢ è‡ªè¨‚ binds                                              â”‚  â”‚      â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰å±¤æ§åˆ¶æ©Ÿåˆ¶

| å±¤ç´š | è¨­å®šè·¯å¾‘ | åŠŸèƒ½ |
|------|----------|------|
| **Sandbox** | `agents.defaults.sandbox.*` | æ±ºå®šå·¥å…·åœ¨å“ªè£¡åŸ·è¡Œï¼ˆDocker vs Hostï¼‰ |
| **Tool Policy** | `tools.allow/deny` | æ±ºå®šå“ªäº›å·¥å…·å¯ç”¨ |
| **Elevated** | `tools.elevated.*` | exec å°ˆç”¨çš„ Host é€ƒé€¸æ©Ÿåˆ¶ |

---

## Sandbox Scopeï¼ˆå®¹å™¨å…±äº«ç¯„åœï¼‰

| Scope | èªªæ˜ |
|-------|------|
| `session` | æ¯å€‹ session ç¨ç«‹å®¹å™¨ |
| `agent` | åŒä¸€ agent å…±ç”¨å®¹å™¨ |
| `shared` | æ‰€æœ‰ agent å…±ç”¨ä¸€å€‹å®¹å™¨ |

---

## è¨­å®šç¯„ä¾‹

```json
{
  "agents": {
    "defaults": {
      "sandbox": {
        "mode": "all",
        "scope": "agent",
        "workspaceAccess": "rw",
        "docker": {
          "image": "openclaw-sandbox:bookworm-slim",
          "containerPrefix": "openclaw-sbx-",
          "readOnlyRoot": true,
          "capDrop": ["ALL"],
          "pidsLimit": 256,
          "memory": "2g",
          "cpus": 2
        }
      }
    }
  }
}
```

---

## CLI æŒ‡ä»¤

```bash
# æŸ¥çœ‹ç•¶å‰ sandbox ç‹€æ…‹
openclaw sandbox explain

# åˆ—å‡ºæ‰€æœ‰ sandbox å®¹å™¨
openclaw sandbox list

# é‡å»ºæ‰€æœ‰å®¹å™¨ï¼ˆæ›´æ–° image å¾Œï¼‰
openclaw sandbox recreate --all
```

---

## æ ¸å¿ƒå•é¡Œèˆ‡è§£æ³•

| å•é¡Œ | èªªæ˜ | Sandbox è§£æ³• |
|------|------|-------------|
| **çˆ†ç‚¸åŠå¾‘** | Agent å‡ºéŒ¯å¯èƒ½æ¯€æ‰æ•´å°æ©Ÿå™¨ | é™åˆ¶åœ¨å®¹å™¨å…§ï¼Œæœ€å¤šæ¯€ workspace |
| **æ•æ„Ÿè³‡æ–™** | Agent å¯è®€ ~/.ssh, ~/.aws | å®¹å™¨å…§çœ‹ä¸åˆ° Host æª”æ¡ˆç³»çµ± |
| **æƒ¡æ„æŒ‡ä»¤** | Prompt injection èª˜å°åŸ·è¡Œ `rm -rf` | å”¯è®€æ ¹ç›®éŒ„ + æ¬Šé™é™åˆ¶ |
| **è³‡æºè€—ç›¡** | ç„¡é™ fork bomb, è¨˜æ†¶é«”è€—ç›¡ | pids-limit, memory limit |
| **ç¶²è·¯æ”»æ“Š** | Agent è¢«èª˜å°ç™¼èµ·æ”»æ“Š | å¯é™åˆ¶ç¶²è·¯å­˜å– |

---

## ä¸€å¥è©±ç¸½çµ

> **Sandbox = è®“ Agent åœ¨ã€Œæ²™ç›’ã€è£¡ç©ï¼Œç©å£äº†ä¹Ÿä¸æœƒå½±éŸ¿ä½ çš„é›»è…¦ã€‚**

---

## ç•¶å‰ç‹€æ…‹ï¼ˆ2026.2.15ï¼‰

### æœ€æ–°ç‰ˆæœ¬æ›´æ–°

| ç‰ˆæœ¬ | é‡é»æ›´æ–° |
|------|----------|
| 2026.2.15 | `sandbox.browser.binds` ç¨ç«‹è¨­å®š browser å®¹å™¨æ›è¼‰ |
| 2026.2.14 | Sandbox file tools æ”¯æ´ bind-mount è·¯å¾‘ã€read-only èªæ„å¼·åŒ– |
| 2026.2.13 | å®‰å…¨å¼·åŒ–ï¼šskill sync è·¯å¾‘é™åˆ¶ã€media è·¯å¾‘é©—è­‰ |

### è¿‘æœŸå®‰å…¨ä¿®å¾©

- **Skill sync è·¯å¾‘é™åˆ¶**ï¼šé˜²æ­¢ frontmatter æ§åˆ¶çš„ skill name ä½œç‚ºæª”æ¡ˆç³»çµ±è·¯å¾‘
- **Media è·¯å¾‘é©—è­‰**ï¼šmessage tool attachments å¼·åˆ¶ sandbox è·¯å¾‘æª¢æŸ¥
- **Browser å®‰å…¨**ï¼šsandbox browser bridge server éœ€è¦èªè­‰
- **Web tools**ï¼šbrowser/web å…§å®¹é è¨­è¦–ç‚ºä¸å¯ä¿¡

---

## å·²çŸ¥å•é¡Œï¼ˆOpen Issuesï¼‰

### ğŸ”´ Critical

| Issue | æ¨™é¡Œ | èªªæ˜ |
|-------|------|------|
| [#8566](https://github.com/openclaw/openclaw/issues/8566) | Sandbox browser runs Chromium as root with --no-sandbox | CVSS 9.6 - Chromium ä»¥ root åŸ·è¡Œä¸”åœç”¨ sandbox |

### ğŸŸ  Bugs

| Issue | æ¨™é¡Œ | èªªæ˜ |
|-------|------|------|
| [#4689](https://github.com/openclaw/openclaw/issues/4689) | exec host defaults to 'sandbox' even when sandbox.mode is 'off' | sandbox.mode=off æ™‚ exec ä»é è¨­é€² sandbox |
| [#4807](https://github.com/openclaw/openclaw/issues/4807) | Sandbox setup script missing from npm package | npm å®‰è£ç¼ºå°‘ sandbox-setup.sh |
| [#9348](https://github.com/openclaw/openclaw/issues/9348) | write tool restriction inconsistent with exec tool | write å’Œ exec è·¯å¾‘é™åˆ¶ä¸ä¸€è‡´ |
| [#13276](https://github.com/openclaw/openclaw/issues/13276) | slugifySessionKey truncates phone numbers | å®¹å™¨åç¨±æˆªæ–·é›»è©±è™Ÿç¢¼ |
| [#16382](https://github.com/openclaw/openclaw/issues/16382) | Discord attachments impossible from sandboxed agents | Sandbox å…§ç„¡æ³•ç™¼é€ Discord é™„ä»¶ |

### ğŸŸ¢ Feature Requests

| Issue | æ¨™é¡Œ | èªªæ˜ |
|-------|------|------|
| [#7722](https://github.com/openclaw/openclaw/issues/7722) | Filesystem Sandboxing Config (tools.fileAccess) | è«‹æ±‚ allowedPaths/denyPaths è¨­å®š |
| [#7827](https://github.com/openclaw/openclaw/issues/7827) | Default Safety Posture: Sandbox & Session Isolation | è«‹æ±‚é è¨­å•Ÿç”¨ sandbox |
| [#12405](https://github.com/openclaw/openclaw/issues/12405) | Pluggable sandbox backends & per-agent exec routing | æ”¯æ´ VM/OrbStack ç­‰é Docker å¾Œç«¯ |
| [#13543](https://github.com/openclaw/openclaw/issues/13543) | Tool-level sandbox mode for selective isolation | è«‹æ±‚ per-tool sandbox è¨­å®š |

---

## ç¤¾ç¾¤è¨è«–é‡é»

### 1. é è¨­å®‰å…¨å§¿æ…‹çˆ­è­°

ç›®å‰ sandbox é è¨­ç‚º `off`ï¼Œç¤¾ç¾¤å»ºè­°ï¼š

- æ–°å®‰è£é è¨­ `mode: "non-main"`
- å…¬é–‹ agent é è¨­ `mode: "all"` + `workspaceAccess: "none"`
- DM é è¨­ `dmScope: "per-channel-peer"`

### 2. Docker é™åˆ¶

Docker sandbox å° coding agent éæ–¼åš´æ ¼ï¼Œç¤¾ç¾¤æ­£åœ¨æ¢ç´¢ï¼š

- OrbStack VM ä½œç‚º node
- exe.dev é›²ç«¯ VM
- è«‹æ±‚ pluggable backend æ”¯æ´

### 3. è·¯å¾‘é™åˆ¶ä¸ä¸€è‡´

`write` tool æœ‰é¡å¤–è·¯å¾‘é™åˆ¶ï¼Œä½† `exec` å¯ç”¨ `cat > file` ç¹éï¼Œç¤¾ç¾¤å»ºè­°çµ±ä¸€ä»¥ Docker binds ç‚ºæº–ã€‚

---

## Workarounds

### npm å®‰è£ç¼ºå°‘ sandbox image

```bash
docker pull debian:bookworm-slim
docker tag debian:bookworm-slim openclaw-sandbox:bookworm-slim
```

### sandbox.mode=off ä½† exec ä»é€² sandbox

```json
{
  "tools": {
    "exec": { "host": "gateway" }
  }
}
```

### Discord é™„ä»¶å•é¡Œ

æš«æ™‚åœç”¨ sandboxï¼š`sandbox.mode: "off"`

---

## åƒè€ƒè³‡æ–™

- [OpenClaw Sandbox CLI Docs](https://github.com/openclaw/openclaw/blob/main/docs/cli/sandbox.md)
- [Sandbox vs Tool Policy vs Elevated](https://github.com/openclaw/openclaw/blob/main/docs/gateway/sandbox-vs-tool-policy-vs-elevated.md)
- [Source: src/agents/sandbox/docker.ts](https://github.com/openclaw/openclaw/blob/main/src/agents/sandbox/docker.ts)
- [Multi-agent Sandbox Tools](https://docs.openclaw.ai/multi-agent-sandbox-tools)
- [Security Docs](https://docs.openclaw.ai/cli/security)
- [Original Gist](https://gist.github.com/pahud/d937b72dcbd404b07115be681de1d46e)
