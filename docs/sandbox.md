# OpenClaw Sandbox æ·±åº¦è§£æ

## æ¦‚è¿°

OpenClaw Sandbox æ˜¯ä¸€å€‹åŸºæ–¼ Docker çš„éš”é›¢åŸ·è¡Œç’°å¢ƒï¼Œç”¨æ–¼ä¿è­·ä¸»æ©Ÿç³»çµ±å…å— AI Agent æ½›åœ¨å±éšªæ“ä½œçš„å½±éŸ¿ã€‚

**é¦–æ¬¡å¼•å…¥ç‰ˆæœ¬ï¼š** `2026.1.8`

---

## è§£æ±ºçš„å•é¡Œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           æ²’æœ‰ Sandbox çš„é¢¨éšª                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   User: "å¹«æˆ‘æ•´ç† ~/Downloads"                                              â”‚
â”‚                        â”‚                                                    â”‚
â”‚                        â–¼                                                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚   Agent     â”‚â”€â”€â”€â–¶â”‚  exec: rm -rf ~/*   (æ¨¡å‹å¹»è¦º/æƒ¡æ„ prompt)      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                       â”‚                                     â”‚
â”‚                                       â–¼                                     â”‚
â”‚                              ğŸ’¥ æ•´å°é›»è…¦æ¯€äº†                                â”‚
â”‚                                                                             â”‚
â”‚   é¢¨éšªä¾†æºï¼š                                                                â”‚
â”‚   â€¢ æ¨¡å‹å¹»è¦º (Hallucination) - ç”¢ç”ŸéŒ¯èª¤æŒ‡ä»¤                                â”‚
â”‚   â€¢ Prompt Injection - æƒ¡æ„è¼¸å…¥èª˜å°åŸ·è¡Œå±éšªæŒ‡ä»¤                            â”‚
â”‚   â€¢ å·¥å…·æ¿«ç”¨ - Agent æœ‰å®Œæ•´ Host æ¬Šé™                                      â”‚
â”‚   â€¢ è³‡æ–™å¤–æ´© - å¯è®€å– ~/.ssh, ~/.aws ç­‰æ•æ„Ÿæª”æ¡ˆ                            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         OpenClaw Sandbox æ¶æ§‹                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                           â”‚
â”‚   â”‚   Agent     â”‚                                                           â”‚
â”‚   â”‚  (Gateway)  â”‚                                                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                                           â”‚
â”‚          â”‚                                                                  â”‚
â”‚          â–¼                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚                    Sandbox Mode åˆ¤æ–·                              â”‚      â”‚
â”‚   â”‚  â€¢ off      â†’ ç›´æ¥åœ¨ Host åŸ·è¡Œ                                   â”‚      â”‚
â”‚   â”‚  â€¢ non-main â†’ åªæœ‰éä¸» session é€² sandbox                        â”‚      â”‚
â”‚   â”‚  â€¢ all      â†’ æ‰€æœ‰ session éƒ½é€² sandbox                          â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚          â”‚                                                                  â”‚
â”‚          â–¼                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚                    Docker Container                               â”‚      â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â”‚
â”‚   â”‚  â”‚  debian:bookworm-slim (é è¨­)                               â”‚  â”‚      â”‚
â”‚   â”‚  â”‚                                                            â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  å®‰å…¨è¨­å®šï¼š                                                â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  â€¢ --read-only (å”¯è®€æ ¹ç›®éŒ„)                                â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  â€¢ --cap-drop ALL (ç§»é™¤æ‰€æœ‰ capabilities)                  â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  â€¢ --security-opt no-new-privileges                        â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  â€¢ --pids-limit (é™åˆ¶ process æ•¸é‡)                        â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  â€¢ --memory / --cpus (è³‡æºé™åˆ¶)                            â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  â€¢ seccomp / apparmor profiles                             â”‚  â”‚      â”‚
â”‚   â”‚  â”‚                                                            â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  æ›è¼‰ï¼š                                                    â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  â€¢ workspace â†’ /workspace (:ro æˆ– :rw)                     â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  â€¢ tmpfs â†’ /tmp, /var/tmp                                  â”‚  â”‚      â”‚
â”‚   â”‚  â”‚  â€¢ è‡ªè¨‚ binds                                              â”‚  â”‚      â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸‰å±¤æ§åˆ¶æ©Ÿåˆ¶

| å±¤ç´š | è¨­å®šè·¯å¾‘ | åŠŸèƒ½ |
|------|----------|------|
| **Sandbox** | `agents.defaults.sandbox.*` | æ±ºå®šå·¥å…·åœ¨å“ªè£¡åŸ·è¡Œï¼ˆDocker vs Hostï¼‰ |
| **Tool Policy** | `tools.allow/deny` | æ±ºå®šå“ªäº›å·¥å…·å¯ç”¨ |
| **Elevated** | `tools.elevated.*` | exec å°ˆç”¨çš„ Host é€ƒé€¸æ©Ÿåˆ¶ |

---

## Sandbox Scopeï¼ˆå®¹å™¨å…±äº«ç¯„åœï¼‰

| Scope | èªªæ˜ |
|-------|------|
| `session` | æ¯å€‹ session ç¨ç«‹å®¹å™¨ |
| `agent` | åŒä¸€ agent å…±ç”¨å®¹å™¨ |
| `shared` | æ‰€æœ‰ agent å…±ç”¨ä¸€å€‹å®¹å™¨ |

---

## è¨­å®šç¯„ä¾‹

```json
{
  "agents": {
    "defaults": {
      "sandbox": {
        "mode": "all",
        "scope": "agent",
        "workspaceAccess": "rw",
        "docker": {
          "image": "openclaw-sandbox:bookworm-slim",
          "containerPrefix": "openclaw-sbx-",
          "readOnlyRoot": true,
          "capDrop": ["ALL"],
          "pidsLimit": 256,
          "memory": "2g",
          "cpus": 2
        }
      }
    }
  }
}
```

---

## CLI æŒ‡ä»¤

```bash
# æŸ¥çœ‹ç•¶å‰ sandbox ç‹€æ…‹
openclaw sandbox explain

# åˆ—å‡ºæ‰€æœ‰ sandbox å®¹å™¨
openclaw sandbox list

# é‡å»ºæ‰€æœ‰å®¹å™¨ï¼ˆæ›´æ–° image å¾Œï¼‰
openclaw sandbox recreate --all
```

---

## æ ¸å¿ƒå•é¡Œèˆ‡è§£æ³•

| å•é¡Œ | èªªæ˜ | Sandbox è§£æ³• |
|------|------|-------------|
| **çˆ†ç‚¸åŠå¾‘** | Agent å‡ºéŒ¯å¯èƒ½æ¯€æ‰æ•´å°æ©Ÿå™¨ | é™åˆ¶åœ¨å®¹å™¨å…§ï¼Œæœ€å¤šæ¯€ workspace |
| **æ•æ„Ÿè³‡æ–™** | Agent å¯è®€ ~/.ssh, ~/.aws | å®¹å™¨å…§çœ‹ä¸åˆ° Host æª”æ¡ˆç³»çµ± |
| **æƒ¡æ„æŒ‡ä»¤** | Prompt injection èª˜å°åŸ·è¡Œ `rm -rf` | å”¯è®€æ ¹ç›®éŒ„ + æ¬Šé™é™åˆ¶ |
| **è³‡æºè€—ç›¡** | ç„¡é™ fork bomb, è¨˜æ†¶é«”è€—ç›¡ | pids-limit, memory limit |
| **ç¶²è·¯æ”»æ“Š** | Agent è¢«èª˜å°ç™¼èµ·æ”»æ“Š | å¯é™åˆ¶ç¶²è·¯å­˜å– |

---

## ä¸€å¥è©±ç¸½çµ

> **Sandbox = è®“ Agent åœ¨ã€Œæ²™ç›’ã€è£¡ç©ï¼Œç©å£äº†ä¹Ÿä¸æœƒå½±éŸ¿ä½ çš„é›»è…¦ã€‚**

---

## ç•¶å‰ç‹€æ…‹ï¼ˆ2026.2.15ï¼‰

### æœ€æ–°ç‰ˆæœ¬æ›´æ–°

| ç‰ˆæœ¬ | é‡é»æ›´æ–° |
|------|----------|
| 2026.2.15 | `sandbox.browser.binds` ç¨ç«‹è¨­å®š browser å®¹å™¨æ›è¼‰ |
| 2026.2.14 | Sandbox file tools æ”¯æ´ bind-mount è·¯å¾‘ã€read-only èªæ„å¼·åŒ– |
| 2026.2.13 | å®‰å…¨å¼·åŒ–ï¼šskill sync è·¯å¾‘é™åˆ¶ã€media è·¯å¾‘é©—è­‰ |

### è¿‘æœŸå®‰å…¨ä¿®å¾©

- **Skill sync è·¯å¾‘é™åˆ¶**ï¼šé˜²æ­¢ frontmatter æ§åˆ¶çš„ skill name ä½œç‚ºæª”æ¡ˆç³»çµ±è·¯å¾‘
- **Media è·¯å¾‘é©—è­‰**ï¼šmessage tool attachments å¼·åˆ¶ sandbox è·¯å¾‘æª¢æŸ¥
- **Browser å®‰å…¨**ï¼šsandbox browser bridge server éœ€è¦èªè­‰
- **Web tools**ï¼šbrowser/web å…§å®¹é è¨­è¦–ç‚ºä¸å¯ä¿¡

---

## ğŸŒªï¸ Sandbox ç½æƒ…ç¸½çµï¼ˆ2026.2.15ï¼‰

> **æ ¸å¿ƒå•é¡Œ**ï¼š2026.2.15 ç‰ˆæœ¬å¼•å…¥çš„ Sandbox æ”¹å‹•å°è‡´å¤šå€‹é—œéµå ´æ™¯å¤±æ•ˆã€‚

### ç™¼ç”Ÿç½æƒ…çš„ç‰ˆæœ¬

- **å¼•å…¥ç‰ˆæœ¬**ï¼š`2026.2.15`
- **å½±éŸ¿ç¯„åœ**ï¼šä½¿ç”¨ `sandbox.mode != "off"` + `elevated exec` + cron/nested sessions çš„çµ„åˆ

### å››å¤§æ ¸å¿ƒæ”¹å‹•æ‘˜è¦

| æ˜Ÿç´š | æ”¹å‹• | èªªæ˜ |
|------|------|------|
| â­ï¸â­ï¸â­ï¸ | SHA-1 â†’ SHA-256 | æ²™ç®±é…ç½®é›œæ¹Šæ¼”ç®—æ³•å‡ç´šï¼Œå½±éŸ¿ç·©å­˜æ¨™è­˜èˆ‡é‡å»ºæª¢æŸ¥ |
| â­ï¸â­ï¸â­ï¸ | é˜»æ­¢å±éšª Docker è¨­å®š | å°é– bind mountsã€host networkingã€unconfined seccomp/apparmor |
| â­ï¸ | ä¿ç•™é™£åˆ—é †åºæ–¼é…ç½®é›œæ¹Š | ä¿®æ­£é †åºæ•æ„Ÿçš„ Docker è¨­å®šæœªè§¸ç™¼å®¹å™¨é‡å»º |
| â­ï¸ | æ¾„æ¸…ç³»çµ±æç¤ºè·¯å¾‘ (#17693) | sandbox bash/exec ä½¿ç”¨å®¹å™¨è·¯å¾‘ /workspaceï¼Œæª”æ¡ˆå·¥å…·ä¿æŒä¸»æ©Ÿæ˜ å°„ |

### ğŸ”´ é«˜å½±éŸ¿ â€” åŠŸèƒ½æ€§ç½é›£

| Issue | æ¨™é¡Œ | èªªæ˜ | å½±éŸ¿ |
|-------|------|------|------|
| [#18748](https://github.com/openclaw/openclaw/issues/18748) | Elevated exec åœ¨ cron å’Œ sessions_send ä¸­å¤±æ•ˆ | sandbox æ¨¡å¼ä¸‹ï¼Œcron job å’Œè·¨ agent è¨Šæ¯è§¸ç™¼çš„ exec(elevated=true) å…¨éƒ¨å¤±æ•—ï¼Œå³ä½¿ config æ­£ç¢ºè¨­å®š `tools.elevated.enabled: true` ä¹Ÿæ²’ç”¨ | âš ï¸ å¤š agent + sandbox + cron çµ„åˆå®Œå…¨ç„¡æ³•ä½¿ç”¨ elevated execï¼ˆå¦‚ gogã€remindctlã€memo ç­‰å·¥å…·ï¼‰ |
| [#4171](https://github.com/openclaw/openclaw/issues/4171) | Cron isolated agent æ²’å‚³ sandboxInfo çµ¦ system prompt | agent æ”¶åˆ°ä¸»æ©Ÿè·¯å¾‘è€Œéå®¹å™¨è·¯å¾‘ `/workspace`ï¼Œå°è‡´è·¯å¾‘éŒ¯èª¤ã€å¹»è¦ºæª”æ¡ˆ | âš ï¸ cron job çš„ agent ä½¿ç”¨éŒ¯èª¤è·¯å¾‘ï¼Œå¯èƒ½å‰µå»º/è®€å–éŒ¯èª¤æª”æ¡ˆ |
| [#2432](https://github.com/openclaw/openclaw/issues/2432) | Read tool ä¸å°Šé‡ Docker bind mounts | è¨­äº† `docker.binds` ä½† agent è®€ä¸åˆ°æ›è¼‰çš„è·¯å¾‘ | âš ï¸ ç„¡æ³•è®€å– bind-mount çš„è³‡æ–™å¤¾å…§å®¹ |
| [#4368](https://github.com/openclaw/openclaw/issues/4368) | DEFAULT_SANDBOX_WORKSPACE_ROOT å¿½ç•¥ MOLTBOT_STATE_DIR | ç¡¬ç·¨ç¢¼ `~/.clawdbot/sandboxes`ï¼Œä¸ç®¡ä½ æ€éº¼è¨­ç’°å¢ƒè®Šæ•¸ | âš ï¸ ç’°å¢ƒè®Šæ•¸é…ç½®ç„¡æ•ˆï¼Œè·¯å¾‘æ··äº‚ |

### ğŸŸ¡ ä¸­å½±éŸ¿ â€” å®‰å…¨æ€§å•é¡Œ

| Issue | æ¨™é¡Œ | èªªæ˜ |
|-------|------|------|
| [#18766](https://github.com/openclaw/openclaw/issues/18766) | SKILL.md runtime æŒ‡ä»¤ä¸å—è·¯å¾‘é™åˆ¶ | install-time æœ‰é™åˆ¶ï¼Œä½† runtime éšæ®µ SKILL.md å¯ä»¥æŒ‡ç¤º agent è®€å¯«ä»»æ„è·¯å¾‘ |
| [#18739](https://github.com/openclaw/openclaw/issues/18739) | Windows ä¸Š exec tool å›  `detached: true` å°è‡´ stdout å…¨ç©º | Windows ä¸Šæ‰€æœ‰ exec æŒ‡ä»¤å›å‚³ `(no output)` |

### ğŸ“Š å½±éŸ¿è©•ä¼°

| ä½¿ç”¨å ´æ™¯ | ç›®å‰ç‹€æ…‹ | å»ºè­° |
|---------|---------|------|
| `sandbox.mode: "all"` + `elevated exec` + ç›´æ¥äº’å‹• | âœ… æ­£å¸¸ | ç„¡ |
| `sandbox.mode: "all"` + `elevated exec` + cron job | âŒ ç„¡æ³•ä½¿ç”¨ | æš«æ™‚è¨­å®š `sandbox.mode: "off"` æˆ–ç§»é™¤ elevated éœ€æ±‚ |
| `sandbox.mode: "all"` + `elevated exec` + sessions_send | âŒ ç„¡æ³•ä½¿ç”¨ | åŒä¸Š |
| `sandbox.mode: "all"` + `docker.binds` + read tool | âŒ ç„¡æ³•ä½¿ç”¨ | æš«æ™‚åœç”¨ bind mounts |
| å¤šagent cron å·¥ä½œæµ | âš ï¸ éƒ¨åˆ†å¤±æ•ˆ | æ³¨æ„è·¯å¾‘éŒ¯èª¤å•é¡Œ |

### âœ… å·²è§£æ±ºå•é¡Œï¼ˆé—œé–‰ï¼‰

| Issue | ç‹€æ…‹ | èªªæ˜ |
|-------|------|------|
| [#4689](https://github.com/openclaw/openclaw/issues/4689) | é—œé–‰ | sandbox.mode=off æ™‚ exec ä»é è¨­é€² sandbox |
| [#4807](https://github.com/openclaw/openclaw/issues/4807) | `not_planned`ï¼ˆå·²é—œé–‰ï¼‰ | sandbox-setup.sh æœªåŒ…å«åœ¨ npm åŒ…ä¸­ |
| [#5255](https://github.com/openclaw/openclaw/issues/5255) | é—œé–‰ | browser file upload API ç¼ºå°‘è·¯å¾‘é©—è­‰ |

### ğŸ”§ Workarounds

#### 1. Elevated exec åœ¨ cron ä¸­å¤±æ•ˆ

**æš«è§£æ–¹æ¡ˆ**ï¼šå°éœ€è¦ elevated exec çš„ agent é—œé–‰ sandbox

```json
{
  "agents": {
    "list": [{
      "id": "scout",
      "sandbox": {
        "mode": "off"
      },
      "tools": {
        "elevated": {
          "enabled": true
        }
      }
    }]
  }
}
```

**ç¼ºé»**ï¼šå¤±å» sandbox å®‰å…¨éš”é›¢

#### 2. Cron agent è·¯å¾‘éŒ¯èª¤

**æš«è§£æ–¹æ¡ˆ**ï¼šé¿å…åœ¨ cron agent ä¸­ä¾è³´å·¥ä½œç›®éŒ„ï¼Œæ˜ç¢ºä½¿ç”¨ `/workspace` è·¯å¾‘

```bash
# åœ¨ SKILL.md ä¸­ï¼Œä½¿ç”¨çµ•å°è·¯å¾‘
cd /workspace
read: /workspace/data/input.txt
```

#### 3. Docker bind mounts ç„¡æ³•è®€å–

**æš«è§£æ–¹æ¡ˆ**ï¼šæš«æ™‚åœç”¨ bind mountsï¼Œæˆ–æ”¹ç”¨å…¶ä»–è³‡æ–™å‚³éæ–¹å¼

#### 4. Windows ä¸Š exec ç„¡ stdout

**æš«è§£æ–¹æ¡ˆ**ï¼šä½¿ç”¨ PowerShell è…³æœ¬æª”æ¡ˆè€Œé inline command

---

## å·²çŸ¥å•é¡Œï¼ˆOpen Issuesï¼‰

### ğŸ”´ Critical

| Issue | æ¨™é¡Œ | èªªæ˜ |
|-------|------|------|
| [#8566](https://github.com/openclaw/openclaw/issues/8566) | Sandbox browser runs Chromium as root with --no-sandbox | CVSS 9.6 - Chromium ä»¥ root åŸ·è¡Œä¸”åœç”¨ sandbox |

### ğŸŸ  Bugs

| Issue | æ¨™é¡Œ | èªªæ˜ |
|-------|------|------|
| [#9348](https://github.com/openclaw/openclaw/issues/9348) | write tool restriction inconsistent with exec tool | write å’Œ exec è·¯å¾‘é™åˆ¶ä¸ä¸€è‡´ |
| [#13276](https://github.com/openclaw/openclaw/issues/13276) | slugifySessionKey truncates phone numbers | å®¹å™¨åç¨±æˆªæ–·é›»è©±è™Ÿç¢¼ |
| [#16382](https://github.com/openclaw/openclaw/issues/16382) | Discord attachments impossible from sandboxed agents | Sandbox å…§ç„¡æ³•ç™¼é€ Discord é™„ä»¶ |

### ğŸŸ¢ Feature Requests

| Issue | æ¨™é¡Œ | èªªæ˜ |
|-------|------|------|
| [#7722](https://github.com/openclaw/openclaw/issues/7722) | Filesystem Sandboxing Config (tools.fileAccess) | è«‹æ±‚ allowedPaths/denyPaths è¨­å®š |
| [#7827](https://github.com/openclaw/openclaw/issues/7827) | Default Safety Posture: Sandbox & Session Isolation | è«‹æ±‚é è¨­å•Ÿç”¨ sandbox |
| [#12405](https://github.com/openclaw/openclaw/issues/12405) | Pluggable sandbox backends & per-agent exec routing | æ”¯æ´ VM/OrbStack ç­‰é Docker å¾Œç«¯ |
| [#13543](https://github.com/openclaw/openclaw/issues/13543) | Tool-level sandbox mode for selective isolation | è«‹æ±‚ per-tool sandbox è¨­å®š |

---

## ç¤¾ç¾¤è¨è«–é‡é»

### 1. é è¨­å®‰å…¨å§¿æ…‹çˆ­è­°

ç›®å‰ sandbox é è¨­ç‚º `off`ï¼Œç¤¾ç¾¤å»ºè­°ï¼š

- æ–°å®‰è£é è¨­ `mode: "non-main"`
- å…¬é–‹ agent é è¨­ `mode: "all"` + `workspaceAccess: "none"`
- DM é è¨­ `dmScope: "per-channel-peer"`

### 2. Docker é™åˆ¶

Docker sandbox å° coding agent éæ–¼åš´æ ¼ï¼Œç¤¾ç¾¤æ­£åœ¨æ¢ç´¢ï¼š

- OrbStack VM ä½œç‚º node
- exe.dev é›²ç«¯ VM
- è«‹æ±‚ pluggable backend æ”¯æ´

### 3. è·¯å¾‘é™åˆ¶ä¸ä¸€è‡´

`write` tool æœ‰é¡å¤–è·¯å¾‘é™åˆ¶ï¼Œä½† `exec` å¯ç”¨ `cat > file` ç¹éï¼Œç¤¾ç¾¤å»ºè­°çµ±ä¸€ä»¥ Docker binds ç‚ºæº–ã€‚

---

## Workarounds

### npm å®‰è£ç¼ºå°‘ sandbox image

```bash
docker pull debian:bookworm-slim
docker tag debian:bookworm-slim openclaw-sandbox:bookworm-slim
```

### sandbox.mode=off ä½† exec ä»é€² sandbox

```json
{
  "tools": {
    "exec": { "host": "gateway" }
  }
}
```

### Discord é™„ä»¶å•é¡Œ

æš«æ™‚åœç”¨ sandboxï¼š`sandbox.mode: "off"`

---

## åƒè€ƒè³‡æ–™

- [OpenClaw Sandbox CLI Docs](https://github.com/openclaw/openclaw/blob/main/docs/cli/sandbox.md)
- [Sandbox vs Tool Policy vs Elevated](https://github.com/openclaw/openclaw/blob/main/docs/gateway/sandbox-vs-tool-policy-vs-elevated.md)
- [Source: src/agents/sandbox/docker.ts](https://github.com/openclaw/openclaw/blob/main/src/agents/sandbox/docker.ts)
- [Multi-agent Sandbox Tools](https://docs.openclaw.ai/multi-agent-sandbox-tools)
- [Security Docs](https://docs.openclaw.ai/cli/security)
- [Original Gist](https://gist.github.com/pahud/d937b72dcbd404b07115be681de1d46e)
