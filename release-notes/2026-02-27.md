# OpenClaw v2026.2.26 版本發佈說明

[GitHub Release](https://github.com/openclaw/openclaw/releases/tag/v2026.2.26)

## 概述

v2026.2.26 是一個重量級安全修復版本，包含 **10 項安全性修補**（多項防止沙箱逃逸與審批繞過），同時帶來外部 Secrets 管理、ACP 執行緒代理、Android 裝置支援等重要功能，以及 Telegram DM 繼承、Queue 可靠性、Typing 指示器等大量穩定性修復。

### 功能更新 (Features)
- ⭐⭐⭐ 外部 Secrets 管理工作流程（`openclaw secrets audit/configure/apply/reload`）([#26155](https://github.com/openclaw/openclaw/pull/26155))
- ⭐⭐⭐ ACP 執行緒代理成為一等公民執行環境 ([#23580](https://github.com/openclaw/openclaw/pull/23580))
- ⭐⭐⭐ Agents 路由 CLI（`openclaw agents bindings/bind/unbind`）([#27195](https://github.com/openclaw/openclaw/pull/27195))
- ⭐⭐ Codex WebSocket 優先傳輸（`transport: "auto"` + SSE fallback）
- ⭐⭐ Android 裝置能力（`device.status`、`device.info`、`notifications.list`）([#27664](https://github.com/openclaw/openclaw/pull/27664), [#27344](https://github.com/openclaw/openclaw/pull/27344))
- ⭐ 通道插件互動式 onboarding 流程 ([#27191](https://github.com/openclaw/openclaw/pull/27191))
- ⭐ Gemini CLI OAuth 風險警告與確認閘道 ([#16683](https://github.com/openclaw/openclaw/pull/16683))

### 安全性提升 (Security)
- ⭐⭐⭐ Node exec 審批計畫凍結，防止 symlink rebind 繞過
- ⭐⭐⭐ Plugin 通道 HTTP auth 路徑正規化，防止 alternate-path 繞過
- ⭐⭐⭐ Sandbox 路徑別名守衛，防止 dangling symlink 逃逸
- ⭐⭐⭐ Workspace FS 邊界別名強化，防止首次寫入逃逸
- ⭐⭐⭐ Config includes 強化（hardlink 拒絕、大小限制）
- ⭐⭐⭐ Node exec 審批強化（凍結執行計畫）
- ⭐⭐⭐ Microsoft Teams 媒體 fetch SSRF 防護
- ⭐⭐⭐ Voice Call (Twilio) webhook replay 強化
- ⭐⭐ Gateway node pairing 元資料釘選，防止 reconnect 欺騙
- ⭐⭐ Pairing 多帳號隔離強化

### 錯誤修復 (Bug Fixes)
- ⭐⭐⭐ Telegram DM allowlist 繼承修復（升級後 DM 不再靜默丟棄）([#27936](https://github.com/openclaw/openclaw/pull/27936))
- ⭐⭐⭐ Queue/Drain/Cron 可靠性強化 ([#27407](https://github.com/openclaw/openclaw/pull/27407))
- ⭐⭐ Typing 指示器全面修復（多個場景）
- ⭐⭐ Browser 擴充套件 relay 全面修復
- ⭐⭐ Agents compaction + onboarding 安全性 ([#26458](https://github.com/openclaw/openclaw/pull/26458))
- ⭐ Google Chat / Nextcloud Talk lifecycle 修復
- ⭐ Feishu 多項修復
- ⭐ NO_REPLY sentinel 洩漏修復

---

## 功能更新 (Features) - by Star Rating

### ⭐⭐⭐ 外部 Secrets 管理 ([#26155](https://github.com/openclaw/openclaw/pull/26155))
- **用途**: 完整的 `openclaw secrets` 工作流程，支援 `audit`、`configure`、`apply`、`reload` 四個子命令，提供執行時快照啟動與 ref-only auth-profile 支援。
- **解決問題**: secrets 散落在 `openclaw.json`，無法集中管理或安全輪換。
- **影響**: 可將 API key、token 等敏感資訊從主設定檔分離，降低洩漏風險。

```text
openclaw secrets audit
        │
        ▼
openclaw secrets configure
        │
        ▼
openclaw secrets apply ──► runtime snapshot 啟動
        │
        ▼
openclaw secrets reload（熱重載，無需重啟 gateway）
```

### ⭐⭐⭐ ACP 執行緒代理成為一等公民執行環境 ([#23580](https://github.com/openclaw/openclaw/pull/23580))
- **用途**: ACP agents 現在是執行緒 session 的一等公民執行環境，支援 `acp` spawn/send dispatch 整合、acpx backend bridging、生命週期控制與 coalesced thread replies。
- **解決問題**: 過去 ACP agents 無法在執行緒 session 中正確運作，缺乏生命週期管理。
- **影響**: 多代理協作場景更穩定，執行緒回覆合併減少噪音。

### ⭐⭐⭐ Agents 路由 CLI ([#27195](https://github.com/openclaw/openclaw/pull/27195))
- **用途**: 新增 `openclaw agents bindings`、`openclaw agents bind`、`openclaw agents unbind`，支援帳號範圍的路由管理，包含 channel-only 升級為 account-scoped binding。
- **解決問題**: 過去無法透過 CLI 管理 agent 與通道帳號的綁定關係。
- **影響**: 可動態調整 agent 路由，`openclaw channels add` 新增可選帳號綁定提示。

### ⭐⭐ Codex WebSocket 優先傳輸
- **用途**: `openai-codex` 預設改為 WebSocket 優先（`transport: "auto"`），SSE 作為 fallback，保留每個 model/runtime 的明確覆寫。
- **解決問題**: SSE 傳輸在某些網路環境下延遲較高。
- **影響**: 更低延遲的 Codex 回應，網路不支援 WebSocket 時自動降級。

### ⭐⭐ Android 裝置能力 ([#27664](https://github.com/openclaw/openclaw/pull/27664), [#27344](https://github.com/openclaw/openclaw/pull/27344))
- **用途**: 新增 Android `device` 能力，支援 `device.status`、`device.info` node 命令，以及 `notifications.list` 列出裝置通知。
- **解決問題**: 過去無法透過 openclaw 查詢 Android 裝置狀態或通知。
- **影響**: agent 工具鏈可直接操作 Android 裝置，適合自動化場景。

### ⭐ 通道插件互動式 Onboarding ([#27191](https://github.com/openclaw/openclaw/pull/27191))
- **用途**: 通道插件可擁有自己的互動式 onboarding 流程（`configureInteractive`、`configureWhenConfigured` hooks）。
- **解決問題**: 過去所有通道共用同一個通用 onboarding 路徑，無法客製化。
- **影響**: 第三方插件可提供更友善的設定體驗。

### ⭐ Gemini CLI OAuth 風險警告 ([#16683](https://github.com/openclaw/openclaw/pull/16683))
- **用途**: 啟動 Gemini CLI OAuth 前新增明確的帳號風險警告與確認閘道。
- **解決問題**: 使用者可能在不了解風險的情況下授權 OAuth。
- **影響**: 降低意外授權風險，文件同步更新。

---

## 安全性提升 (Security) - by Star Rating

### ⭐⭐⭐ Node exec 審批計畫凍結（防止 symlink rebind 繞過）
- **用途**: 透過 `system.run.prepare` 凍結不可變的審批時執行計畫（`argv`/`cwd`/`agentId`/`sessionKey`），審批轉發/執行時強制使用這些值，拒絕可變 parent-symlink cwd 路徑。
- **解決問題**: 攻擊者可透過 symlink rebind 在審批後替換執行目標，繞過審批機制。
- **影響**: 審批後執行計畫不可竄改。感謝 @tdjackey 回報。

### ⭐⭐⭐ Plugin 通道 HTTP auth 路徑正規化
- **用途**: 對 `/api/channels` 路徑進行大小寫 + percent-decoding + slash 正規化後再比對，解析 encoded dot-segment traversal，對格式錯誤的 `%` 編碼 channel prefix fail closed。
- **解決問題**: 攻擊者可透過 alternate-path 變體繞過 gateway auth。
- **影響**: 通道 HTTP 端點的 auth 防護更嚴密。感謝 @zpbrent 回報。

### ⭐⭐⭐ Sandbox 路徑別名守衛（防止 dangling symlink 逃逸）
- **用途**: 透過解析現有祖先路徑拒絕 broken symlink 目標，對 out-of-root 目標 fail closed。
- **解決問題**: 攻擊者可建立指向沙箱外的 dangling symlink，讓 patch 寫入逃逸。
- **影響**: workspace 寫入操作嚴格限制在沙箱邊界內。感謝 @tdjackey 回報。

### ⭐⭐⭐ Workspace FS 邊界別名強化（防止首次寫入逃逸）
- **用途**: 強化非現有葉節點 symlink 別名的 canonical 邊界解析，同時保留有效的 in-root 別名。
- **解決問題**: 首次寫入時 symlink 目標尚未存在，舊邏輯無法正確驗證邊界。
- **影響**: 即使是新建檔案的寫入操作也受到邊界保護。感謝 @tdjackey 回報。

### ⭐⭐⭐ Config includes 強化
- **用途**: 使用 verified-open 讀取 `$include` 檔案，拒絕 hardlinked include 別名，強制 include 檔案大小限制。
- **解決問題**: 攻擊者可透過 hardlink 或超大 include 檔案影響 config 解析。
- **影響**: config include 解析嚴格限制在可信的 in-root 檔案。感謝 @zpbrent 回報。

### ⭐⭐⭐ Node exec 審批強化（凍結執行計畫）
- **用途**: 要求 `host=node` 的結構化 `commandArgv` 審批，強制版本化 `systemRunBindingV1` 匹配，缺少/不匹配時 fail-closed，新增 `GIT_EXTERNAL_DIFF` 至封鎖的 host env keys。
- **解決問題**: 舊版審批機制可被繞過，允許執行未審批的命令。
- **影響**: exec 審批機制更嚴格。感謝 @tdjackey 回報。

### ⭐⭐⭐ Microsoft Teams 媒體 fetch SSRF 防護
- **用途**: 將 Graph message/hosted-content/attachment fetch 路由至共享的 SSRF 防護 fetch 路徑，集中化 hostname-suffix allowlist 政策。
- **解決問題**: Teams 媒體 fetch 可能被用於 SSRF 攻擊，存取內部網路資源。
- **影響**: Teams 媒體操作受到統一的 SSRF 防護。感謝 @tdjackey 回報。

### ⭐⭐⭐ Voice Call (Twilio) webhook replay 強化
- **用途**: 將 webhook replay + manager dedupe identity 綁定至已驗證的請求材料，移除未簽名的 `i-twilio-idempotency-token` 信任。
- **解決問題**: 攻擊者可偽造 idempotency token 進行 replay 攻擊。
- **影響**: Twilio webhook 處理更安全。感謝 @tdjackey 回報。

### ⭐⭐ Gateway node pairing 元資料釘選
- **用途**: 跨 reconnect 釘選已配對裝置的 `platform`/`deviceFamily` 元資料，並將這些欄位綁入裝置 auth 簽章。
- **解決問題**: 攻擊者可在 reconnect 時偽造元資料，擴展 node 命令 allowlist。
- **影響**: 裝置配對後元資料不可被 reconnect 欺騙竄改。感謝 @76embiid21 回報。

### ⭐⭐ Pairing 多帳號隔離強化
- **用途**: 在核心 + 擴充訊息通道中強制帳號範圍的 pairing allowlist 和 pending-request 儲存。
- **解決問題**: 多帳號設定下，pairing 請求可能跨帳號洩漏。
- **影響**: 每個帳號的 pairing 請求嚴格隔離。感謝 @tdjackey 回報，@gumadeiras 實作。

---

## 錯誤修復 (Bug Fixes) - by Star Rating

### ⭐⭐⭐ Telegram DM allowlist 繼承修復 ([#27936](https://github.com/openclaw/openclaw/pull/27936))
- **用途**: 在所有支援帳號的通道中，使用有效的帳號+父層設定繼承來強制 `dmPolicy: "allowlist"` 的 `allowFrom` 要求；`openclaw doctor --fix` 可從 pairing-store 還原遺失的 `allowFrom`。
- **解決問題**: 升級後 DM 流量被靜默丟棄，`doctor` 誤報或漏報。
- **影響**: 升級後 DM 設定正確繼承，不再需要手動修復。感謝 @widingmarcus-cyber 回報。

```text
升級前：
  dmPolicy=allowlist + allowFrom=[] ──► DM 靜默丟棄 ✗

升級後：
  doctor --fix 偵測 ──► 從 pairing-store 還原 allowFrom ──► DM 正常接收 ✓
```

### ⭐⭐⭐ Queue/Drain/Cron 可靠性強化 ([#27407](https://github.com/openclaw/openclaw/pull/27407), [#27332](https://github.com/openclaw/openclaw/pull/27332), [#27427](https://github.com/openclaw/openclaw/pull/27427))
- **用途**: 強化 lane draining（保證 `draining` flag 重置）、gateway 重啟 drain 視窗期間拒絕新的 enqueue、`/stop` 加入 queued-backlog cutoff 元資料，cron `agentTurn` 外部安全 timeout 提升。
- **解決問題**: drain flag 未重置導致 queue 卡死；重啟期間接受的任務被靜默丟棄；cron 長時間任務被誤判 timeout。
- **影響**: queue 與 cron 在重啟、停止、長時間任務場景下更可靠。

### ⭐⭐ Typing 指示器全面修復 ([#27250](https://github.com/openclaw/openclaw/pull/27250), [#27428](https://github.com/openclaw/openclaw/pull/27428), [#27413](https://github.com/openclaw/openclaw/pull/27413), [#27493](https://github.com/openclaw/openclaw/pull/27493))
- **用途**: 修復多個 typing 指示器洩漏場景：run completion 後 keepalive tick 重觸發、dispatch idle 未到達時的清理、cross-channel typing 抑制統一、shared typing keepalive 連續失敗 circuit breaker。
- **解決問題**: 使用者在 agent 完成後仍看到 typing 指示器持續顯示。
- **影響**: typing 指示器在所有通道和場景下正確清理。

### ⭐⭐ Browser 擴充套件 relay 全面修復 ([#23842](https://github.com/openclaw/openclaw/pull/23842), [#25928](https://github.com/openclaw/openclaw/pull/25928), [#27617](https://github.com/openclaw/openclaw/pull/27617))
- **用途**: 修復 CORS preflight 處理、`?token=` query-param auth、shutdown 時 flush pending timers、MV3 extension 斷線重連韌性、malformed `%` 路徑 400 回應。
- **解決問題**: Chrome 擴充套件在各種邊緣情況下連線失敗或 badge 卡在 `…`。
- **影響**: Browser 擴充套件連線更穩定，各種 auth 方式均可正常運作。

### ⭐⭐ Agents compaction + onboarding 安全性 ([#26458](https://github.com/openclaw/openclaw/pull/26458), [#27314](https://github.com/openclaw/openclaw/pull/27314))
- **用途**: 防止雙重壓縮（剝除壓縮邊界周圍的過時 assistant usage）；`openclaw onboard --reset` 預設範圍改為 `config+creds+sessions`（workspace 刪除需明確 `--reset-scope full`）。
- **解決問題**: 雙重壓縮導致對話歷史損壞；`--reset` 意外刪除 workspace。
- **影響**: compaction 更安全，`--reset` 不再意外清除 workspace。

### ⭐⭐ Delivery queue 恢復 backoff ([#27710](https://github.com/openclaw/openclaw/pull/27710))
- **用途**: 持久化失敗發送的 `lastAttemptAt`，延遲恢復重試直到 backoff 視窗到期。
- **解決問題**: 重試飢餓（retry starvation）導致某些訊息長時間無法發送。
- **影響**: 發送失敗後的重試更均勻。感謝 @Jimmy-xuzimo。

### ⭐ Google Chat lifecycle 修復 ([#27384](https://github.com/openclaw/openclaw/pull/27384))
- **用途**: 在 webhook 模式下保持 Google Chat `startAccount` pending 直到 abort。
- **解決問題**: Google Chat 帳號在 webhook 模式下不斷 auto-restart。
- **影響**: Google Chat webhook 模式穩定運作。感謝 @junsuwhy。

### ⭐ Nextcloud Talk lifecycle 修復 ([#27897](https://github.com/openclaw/openclaw/pull/27897))
- **用途**: 保持 `startAccount` pending 直到 abort，shutdown 時停止 webhook monitor，防止 `EADDRINUSE` restart loop。
- **解決問題**: Nextcloud Talk 在 gateway 管理帳號生命週期時不斷 restart。
- **影響**: Nextcloud Talk 帳號生命週期正確管理。

### ⭐ Feishu inbound message metadata ([#27253](https://github.com/openclaw/openclaw/pull/27253))
- **用途**: 在 `BodyForAgent` 中加入 inbound `message_id` 於專用元資料行。
- **解決問題**: agent 無法可靠地關聯需要 message ID 的媒體/訊息操作。
- **影響**: agent 可直接使用 message ID 進行後續操作。感謝 @xss925175263。

### ⭐ Feishu doc tools 多帳號路由 ([#27338](https://github.com/openclaw/openclaw/pull/27338))
- **用途**: 將 `feishu_doc` 和 `feishu_app_scopes` 路由至活躍的 agent 帳號上下文。
- **解決問題**: 多帳號 agent 預設使用第一個設定的 app，而非當前活躍帳號。
- **影響**: 多帳號 Feishu 設定下 doc tools 正確路由。感謝 @AaronL725。

### ⭐ NO_REPLY 抑制修復 ([#27387](https://github.com/openclaw/openclaw/pull/27387), [#27531](https://github.com/openclaw/openclaw/pull/27531))
- **用途**: 在 Slack API 發送前和 sub-agent announce completion 流程中抑制 `NO_REPLY`。
- **解決問題**: 使用者偶爾收到 `NO_REPLY` 文字訊息。
- **影響**: `NO_REPLY` sentinel 完全不再洩漏至使用者可見的通道。感謝 @Sid-Qin。

### ⭐ Temp dirs Linux umask 修復 ([#27853](https://github.com/openclaw/openclaw/pull/27853))
- **用途**: 強制 temp dir 建立後設定 `0700` 權限，並在信任檢查前自我修復現有可寫入的 temp dirs。
- **解決問題**: `umask 0002` 安裝環境下 openclaw 啟動 crash-loop。
- **影響**: 非標準 umask 環境下正常啟動。感謝 @stakeswky。

### ⭐ Telegram sendChatAction 401 backoff ([#27415](https://github.com/openclaw/openclaw/pull/27415))
- **用途**: 在重複 unauthorized 失敗後加入有界指數 backoff + 暫時本地 typing 抑制。
- **解決問題**: 無界 retry 可能觸發 Telegram 濫用執法並導致 bot 被刪除。
- **影響**: Telegram bot 在 auth 問題時不再因 retry storm 被封鎖。感謝 @widingmarcus-cyber。

### ⭐ Cron/Hooks isolated routing 修復 ([#27289](https://github.com/openclaw/openclaw/pull/27289), [#27282](https://github.com/openclaw/openclaw/pull/27282))
- **用途**: 在 isolated runs 中保留 canonical `agent:*` session keys，防止已限定的 key 被雙重前綴。
- **解決問題**: cron/hooks isolated routing 中 session key 格式錯誤導致路由失敗。
- **影響**: cron 和 hooks 的 isolated session routing 正確運作。感謝 @MaheshBhushan。

### ⭐ Models MiniMax auth header 預設值修復 ([#27600](https://github.com/openclaw/openclaw/pull/27600))
- **用途**: 為 onboarding 產生的 MiniMax API providers 和內建 MiniMax provider 模板設定 `authHeader: true`。
- **解決問題**: MiniMax 首次請求因缺少 `Authorization` header 而回傳 `401 authentication_error`。
- **影響**: MiniMax 模型開箱即用。感謝 @riccoyuanft、@kevinWangSheng。

### ⭐ Pi image-token 使用量修復 ([#27602](https://github.com/openclaw/openclaw/pull/27602))
- **用途**: 停止每輪重新注入歷史 image blocks，只處理當前 prompt 的 image 參考。
- **解決問題**: 每輪對話都重新注入所有歷史圖片，導致 token 使用量失控增長。
- **影響**: 包含圖片的長對話 token 使用量大幅降低。

---

## 總結

| 類別 | 3 顆星 | 2 顆星 | 1 顆星 | 摘要 |
|------|--------|--------|--------|------|
| 功能更新 | 3 | 2 | 2 | 外部 Secrets 管理、ACP 代理、Agents 路由 CLI |
| 安全性提升 | 8 | 2 | 0 | 10 項安全修補，多項防止沙箱逃逸與審批繞過 |
| 錯誤修復 | 2 | 3 | 10 | Telegram DM 繼承、Queue 可靠性、Typing 指示器 |
| **總計** | **13** | **7** | **12** | **32 項** |

**發佈日期**: 2026-02-27
**版本**: 2026.2.26
**狀態**: Production Ready
**GitHub Release**: [v2026.2.26](https://github.com/openclaw/openclaw/releases/tag/v2026.2.26)
