# OpenClaw v2026.2.25 版本發佈說明

[GitHub Release](https://github.com/openclaw/openclaw/releases/tag/v2026.2.25)

## 概述

- **功能更新**: ⭐⭐⭐ Heartbeat directPolicy 設定化、⭐⭐ Android 串流/啟動效能、⭐ UI 行動版排版
- **安全性提升**: ⭐⭐⭐ Gateway WebSocket 跨來源防護、⭐⭐⭐ Exec approval 路徑綁定、⭐⭐⭐ 多 channel 反應事件授權修復、⭐⭐ 多項 channel 授權強化
- **錯誤修復**: ⭐⭐⭐ Model fallback chain 大修、⭐⭐⭐ Cron 多帳號路由修復、⭐⭐ Subagent delivery 重構、⭐⭐ Telegram preview cleanup

---

## 功能更新 (Features) - by Star Rating

### ⭐⭐⭐ Heartbeat directPolicy 設定化

- **用途**: 以 `agents.defaults.heartbeat.directPolicy`（`allow` | `block`）取代舊有的 DM toggle，支援 per-agent 覆寫
- **解決問題**: 舊設定語意不清，無法精細控制 heartbeat 是否傳送至 DM
- **影響**: **BREAKING** — 預設值改回 `allow`；若需維持 `2026.2.24` 的 DM 封鎖行為，需手動設定 `block`

### ⭐⭐ Android 串流與啟動效能改善

- **用途**: 改善 Android 原生 UI 的串流交付處理與 Markdown 渲染品質；延遲 foreground-service 啟動、移出 WebView debug init 至非關鍵路徑 ([#26079](https://github.com/openclaw/openclaw/pull/26079), [#26659](https://github.com/openclaw/openclaw/pull/26659))
- **解決問題**: Android 冷啟動慢、GFM Markdown 渲染不一致
- **影響**: 更快的啟動速度、更穩定的串流顯示

### ⭐ UI 行動版 Compose 排版

- **用途**: 小螢幕上的 compose action buttons 改為堆疊排列 ([#11167](https://github.com/openclaw/openclaw/pull/11167))
- **解決問題**: 小螢幕上按鈕擁擠、難以點擊
- **影響**: 行動裝置操作體驗改善

### ⭐ Agents/Config schema 提示

- **用途**: 提醒 agent 在編輯 config 前先呼叫 `config.schema`，避免猜測欄位
- **解決問題**: Agent 自行猜測 config 欄位導致錯誤設定
- **影響**: 減少 config 操作錯誤

---

## 安全性提升 (Security) - by Star Rating

### ⭐⭐⭐ Gateway WebSocket 跨來源暴力破解防護 ([v2026.2.25](https://github.com/openclaw/openclaw/releases/tag/v2026.2.25))

- **用途**: 對直接 browser WebSocket 連線強制 origin check、password-auth 失敗節流、封鎖 silent auto-pairing
- **解決問題**: 跨來源暴力破解與 session takeover 攻擊鏈
- **影響**: 大幅提升 gateway 對未授權 browser 連線的防護

```
Browser WebSocket 連線
        │
        ▼
┌─────────────────────────────┐
│ Origin check                │
│ + password throttling       │
│ + block silent auto-pairing │
└──────────┬──────────────────┘
           │ 驗證失敗
           ▼
    ┌─────────────┐
    │ 連線拒絕 ✋  │
    └─────────────┘
```

### ⭐⭐⭐ Exec approval 路徑綁定強化 ([v2026.2.25](https://github.com/openclaw/openclaw/releases/tag/v2026.2.25))

- **用途**: `system.run` approval 綁定至精確 argv identity，node host 上拒絕 symlink cwd 並正規化 executable path
- **解決問題**: trailing-space 路徑替換與 mutable-cwd symlink retarget 繞過 approval 的攻擊
- **影響**: exec approval 無法被路徑操控繞過

### ⭐⭐⭐ 多 channel 反應事件授權修復 ([v2026.2.25](https://github.com/openclaw/openclaw/releases/tag/v2026.2.25))

- **用途**: Signal、Discord、Slack、Telegram、LINE、IRC、MS Teams 的 reaction/pin 事件在 enqueue 前統一通過 DM/group 授權檢查
- **解決問題**: 未授權 sender 可透過 reaction 事件注入 system events，繞過 dmPolicy/groupPolicy
- **影響**: 所有 channel 的 reaction ingress 與一般訊息授權對齊

### ⭐⭐⭐ Workspace FS hardlink 防護 ([v2026.2.25](https://github.com/openclaw/openclaw/releases/tag/v2026.2.25))

- **用途**: 拒絕 workspace 內的 hardlink 別名在 `tools.fs.workspaceOnly` 與 sandbox mount-root 邊界檢查中通過
- **解決問題**: 透過 in-workspace hardlink 讀寫 workspace 外檔案
- **影響**: workspace 邊界防護更嚴密

### ⭐⭐⭐ macOS beta onboarding OAuth 路徑移除 ([v2026.2.25](https://github.com/openclaw/openclaw/releases/tag/v2026.2.25))

- **用途**: 移除 Anthropic OAuth sign-in 與 `oauth.json` onboarding 路徑（PKCE verifier 透過 OAuth state 暴露）
- **解決問題**: macOS beta onboarding 路徑的 PKCE verifier 洩漏
- **影響**: Anthropic 訂閱授權改為 setup-token-only

### ⭐⭐ Gateway trusted proxy operator 角色要求 ([v2026.2.25](https://github.com/openclaw/openclaw/releases/tag/v2026.2.25))

- **用途**: Control UI trusted-proxy pairing bypass 需要 `operator` 角色
- **解決問題**: 未配對的 `node` session 可透過 `client.id=control-ui` 連線並呼叫 node event methods
- **影響**: 防止未授權 node session 取得 operator 權限

### ⭐⭐ MS Teams file consent 跨對話防護 ([v2026.2.25](https://github.com/openclaw/openclaw/releases/tag/v2026.2.25))

- **用途**: `fileConsent/invoke` 上傳接受/拒絕綁定至原始對話
- **解決問題**: 透過洩漏的 `uploadId` 跨對話觸發或取消待上傳檔案
- **影響**: Teams 檔案上傳流程無法被跨對話操控

### ⭐⭐ Nextcloud Talk webhook 重放防護

- **用途**: 持久化 per-account replay dedupe、拒絕未預期 webhook backend origin、未簽名流量在完整 body 讀取前即拒絕
- **解決問題**: 重放攻擊與未授權 webhook 流量
- **影響**: Nextcloud Talk webhook 安全性大幅提升

### ⭐⭐ SSRF IPv6 multicast 防護 ([v2026.2.25](https://github.com/openclaw/openclaw/releases/tag/v2026.2.25))

- **用途**: 將 IPv6 multicast literals（`ff00::/8`）列為 blocked/private-internal
- **解決問題**: multicast literal 繞過 SSRF URL-host preflight 與 DNS answer validation
- **影響**: SSRF 防護覆蓋 IPv6 multicast 範圍

### ⭐ Gateway pairing operator scope 強化

- **用途**: 共享 token auth 的 operator device-identity session 需完成 pairing
- **解決問題**: 未配對裝置自行取得 operator scope
- **影響**: operator 權限邊界更嚴格

---

## 錯誤修復 (Bug Fixes) - by Star Rating

### ⭐⭐⭐ Agents/Model fallback chain 大修 ([#11972](https://github.com/openclaw/openclaw/pull/11972), [#24137](https://github.com/openclaw/openclaw/pull/24137), [#17231](https://github.com/openclaw/openclaw/pull/17231), [#23816](https://github.com/openclaw/openclaw/pull/23816), [#26106](https://github.com/openclaw/openclaw/pull/26106))

- **用途**: 修復 fallback chain 在多種邊界情況下中斷的問題；`model_cooldown`/`cooling down` 歸類為 `rate_limit` 以繼續 failover
- **解決問題**: allowlist 存在時 fallback chain 無法到達；session model 與 primary 不同時 same-provider fallback 失效；最後 candidate 未知錯誤時 chain 中斷
- **影響**: fallback 更可靠，減少因 model 不可用導致的請求失敗

```
Primary model 失敗
        │
        ▼
┌───────────────────────┐
│ 錯誤類型？            │
└──────────┬────────────┘
           │
    ┌──────┴──────┐
    │             │
rate_limit     其他錯誤
    │             │
    ▼             ▼
同 provider   繼續 fallback
fallback      chain traversal
                  │
                  ▼
          ┌──────────────────┐
          │ 最後 candidate   │
          │ → throw 原始錯誤 │
          └──────────────────┘
```

### ⭐⭐⭐ Cron/Message multi-account routing 修復 ([#27015](https://github.com/openclaw/openclaw/pull/27015), [#26975](https://github.com/openclaw/openclaw/pull/26975))

- **用途**: 優先使用 `delivery.accountId`；未指定時 fallback 至 agent 綁定的 channel account
- **解決問題**: isolated cron delivery 忽略 `accountId`，`message.send` 未指定時錯誤 fallback 至 global account
- **影響**: 多 bot 帳號環境下 cron 訊息路由正確

```
cron job 觸發
        │
        ▼
┌──────────────────────────┐
│ delivery.accountId 指定？ │
└──────────┬───────────────┘
           │
    ┌──────┴──────┐
    │             │
   Yes            No
    │             │
    ▼             ▼
直接使用      fallback：agent
accountId     綁定的 channel
              account
```

### ⭐⭐⭐ Cron/Announce duplicate guard ([#27018](https://github.com/openclaw/openclaw/pull/27018))

- **用途**: 分開追蹤「已嘗試 deliver」與「已確認 delivered」，避免 fallback main-session summary 重複發送
- **解決問題**: uncertain-ack 路徑下 cron 結果重複傳送給使用者
- **影響**: 使用者不再收到重複的 cron 通知

### ⭐⭐ Subagents delivery 重構 ([#26867](https://github.com/openclaw/openclaw/pull/26867), [#25961](https://github.com/openclaw/openclaw/pull/25961), [#26803](https://github.com/openclaw/openclaw/pull/26803))

- **用途**: subagent completion announce 改為明確的 queue/direct/fallback state machine；修復 cold/stale plugin-registry 狀態下的 channel-plugin 解析
- **解決問題**: subagent 完成後 announce 在特定 plugin 狀態下失敗或靜默丟失
- **影響**: subagent 回覆更可靠

### ⭐⭐ Telegram/Preview cleanup 修復 ([#27042](https://github.com/openclaw/openclaw/pull/27042))

- **用途**: 後續訊息為 media-only 時，保留已 finalized 的 text preview
- **解決問題**: 混合 text + voice 回合中，已顯示的 text preview 被 cleanup 刪除
- **影響**: Telegram 串流預覽不再被誤刪

### ⭐⭐ Telegram/Webhook 修復 ([#26156](https://github.com/openclaw/openclaw/pull/26156))

- **用途**: 預先初始化 webhook bots，切換為 callback-mode JSON 處理
- **解決問題**: webhook request hang 與 dropped updates
- **影響**: Telegram webhook 模式更穩定

### ⭐⭐ Slack/Session threads context overflow 防護 ([#26912](https://github.com/openclaw/openclaw/pull/26912))

- **用途**: 防止過大的 parent-session 繼承破壞新 thread session；新增 `session.parentForkMaxTokens`（預設 100000）
- **解決問題**: 新 thread session 因 context overflow 靜默損壞
- **影響**: Slack thread session 更穩定

### ⭐⭐ Discord/Gateway fatal error 處理 ([#23832](https://github.com/openclaw/openclaw/pull/23832))

- **用途**: 捕捉並 drain 啟動時的 gateway `error` 事件，`Fatal Gateway error: 4014` 改為可操作的提示
- **解決問題**: 早期 gateway error 導致 uncaught crash
- **影響**: Discord gateway 啟動錯誤有明確提示

### ⭐ Telegram/Markdown spoilers 修復 ([#26105](https://github.com/openclaw/openclaw/pull/26105))

- **用途**: 保留有效的 `||spoiler||` pair，未配對的 `||` 保留為 literal text
- **解決問題**: 全有或全無的 spoiler 抑制導致誤判
- **影響**: Telegram spoiler 語法更準確

### ⭐ Slack/Allowlist channel ID 大小寫修復 ([#26878](https://github.com/openclaw/openclaw/pull/26878))

- **用途**: channel allowlist 解析改為 case-insensitive
- **解決問題**: 小寫 config key 無法匹配 Slack runtime 大寫 ID，導致 channel event 靜默丟棄
- **影響**: Slack allowlist 設定更寬容

### ⭐ Voice-call TTS tool 隱藏 ([#27025](https://github.com/openclaw/openclaw/pull/27025))

- **用途**: message provider 為 `voice` 時隱藏 `tts` tool
- **解決問題**: voice-call 選擇 self-playback TTS 導致靜默無輸出
- **影響**: voice-call 不再進入 TTS 無輸出迴圈

### ⭐ Cron/Model override fallback ([#26717](https://github.com/openclaw/openclaw/pull/26717))

- **用途**: isolated payload.model 不在 allowlist 時 fallback 至 default model，而非直接失敗
- **解決問題**: model 被移除後 cron job 持續失敗
- **影響**: cron job 對 model 設定變更更有彈性

---

## 總結

| 類別 | 3 顆星 | 2 顆星 | 1 顆星 | 摘要 |
|------|--------|--------|--------|------|
| 功能更新 | 1 | 1 | 2 | Heartbeat 設定化、Android 效能、UI 改善 |
| 安全性 | 5 | 4 | 1 | Gateway 防護、多 channel 授權、FS 邊界 |
| 錯誤修復 | 3 | 5 | 4 | Fallback chain、Cron 路由、Subagent delivery |
| **總計** | **9** | **10** | **7** | |

**發佈日期**: 2026-02-25
**版本**: 2026.2.25
**狀態**: Production Ready
**GitHub Release**: [v2026.2.25](https://github.com/openclaw/openclaw/releases/tag/v2026.2.25)
