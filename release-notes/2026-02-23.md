# OpenClaw v2026.2.23 版本發佈說明

[GitHub Release](https://github.com/openclaw/openclaw/releases/tag/v2026.2.23)

## 概述

- **功能更新**：新增 Kilo Gateway、Vercel AI Gateway provider 支援；Sessions/Cron 強化維護機制；web_search 新增 Kimi provider；影片理解新增 Moonshot；per-agent `params` 覆寫支援
- **安全性提升**：exec 混淆指令偵測；ACP 權限自動核准強化；Skills XSS 防護；OTEL 敏感資料遮蔽；config 路徑遍歷防護
- **錯誤修復**：Telegram polling/reactions 修復；Agents 推理洩漏修復；Bedrock prompt cache 修復；多項 provider 相容性修復

---

## 功能更新 (Features) - by Star Rating

### ⭐⭐⭐ Kilo Gateway Provider 支援 ([#20212](https://github.com/openclaw/openclaw/pull/20212))
- **用途**：新增 `kilocode` 作為一級 provider，預設模型為 `kilocode/anthropic/claude-opus-4.6`，含完整 auth、onboarding、implicit provider 偵測與 transcript/cache-ttl 處理
- **解決問題**：使用者無法透過 Kilo Gateway 接入 Claude 模型
- **影響**：擴展可用 provider 選項，支援 Kilo 訂閱用戶直接使用

### ⭐⭐⭐ Sessions/Cron 維護強化 ([#24753](https://github.com/openclaw/openclaw/pull/24753))
- **用途**：新增 `openclaw sessions cleanup`，支援 per-agent store 指定、磁碟用量控制（`session.maintenance.maxDiskBytes` / `highWaterBytes`）、更安全的 transcript/archive 清理與 run-log 保留行為
- **解決問題**：長期運行的 gateway session 累積大量歷史資料，佔用磁碟空間
- **影響**：改善長期穩定性，防止磁碟耗盡

```text
sessions cleanup 流程
─────────────────────────────────────────────
openclaw sessions cleanup
        │
        ▼
  per-agent store 掃描
        │
        ├─► 超過 maxDiskBytes? ──► 清理舊 transcript/archive
        │
        └─► 保留 run-log（依 retention 設定）
```

### ⭐⭐ Vercel AI Gateway Provider ([#23985](https://github.com/openclaw/openclaw/pull/23985))
- **用途**：接受 Claude shorthand model refs（`vercel-ai-gateway/claude-*`），自動正規化為 canonical Anthropic-routed model id
- **解決問題**：使用者需手動輸入完整 model id 才能透過 Vercel AI Gateway 使用 Claude
- **影響**：簡化 Vercel AI Gateway 用戶的 model 設定

### ⭐⭐ web_search Kimi (Moonshot) Provider ([#16616](https://github.com/openclaw/openclaw/pull/16616), [#18822](https://github.com/openclaw/openclaw/pull/18822))
- **用途**：新增 `provider: "kimi"` 支援，含 key/config schema wiring 與修正後的兩步驟 `$web_search` tool flow（先 echo tool results 再 synthesis），包含 citation 擷取
- **解決問題**：無法使用 Moonshot/Kimi 作為 web search provider
- **影響**：擴展搜尋 provider 選項，改善引用來源追蹤

### ⭐⭐ 影片理解 Moonshot Provider ([#12063](https://github.com/openclaw/openclaw/pull/12063))
- **用途**：新增原生 Moonshot 影片 provider，加入 auto video key 偵測，重構影片執行以遵循 `entry/config/provider` baseUrl+header 優先順序
- **解決問題**：Moonshot 影片分析無法正確路由
- **影響**：統一影片與音訊的 provider 行為

### ⭐⭐ Per-agent `params` 覆寫 ([#17470](https://github.com/openclaw/openclaw/pull/17470), [#17112](https://github.com/openclaw/openclaw/pull/17112))
- **用途**：支援 per-agent `params` 覆寫疊加於 model defaults（含 `cacheRetention`），讓混合流量 agent 可獨立調整 cache 行為
- **解決問題**：所有 agent 共用同一 cache 設定，無法針對特定 agent 優化
- **影響**：提升多 agent 環境的靈活性

### ⭐ Prompt Caching 文件 ([GitHub Release](https://github.com/openclaw/openclaw/releases/tag/v2026.2.23))
- **用途**：新增專屬 prompt-caching 參考文件，涵蓋 `cacheRetention`、per-agent `params` merge 優先順序、Bedrock/OpenRouter 行為、cache-ttl + heartbeat 調校
- **解決問題**：prompt caching 設定分散，缺乏統一說明
- **影響**：降低設定門檻

### ⭐ Gateway HTTP Security Headers ([GitHub Release](https://github.com/openclaw/openclaw/releases/tag/v2026.2.23))
- **用途**：新增 `gateway.http.securityHeaders.strictTransportSecurity` 支援，為直接 HTTPS 部署發送 `Strict-Transport-Security` header
- **解決問題**：直接 HTTPS 部署缺少 HSTS 保護
- **影響**：強化直接暴露 HTTPS 的 gateway 安全性

### ⭐ Bootstrap 快取優化 ([#22220](https://github.com/openclaw/openclaw/pull/22220))
- **用途**：per session key 快取 bootstrap 檔案快照，session reset/delete 時清除，減少 in-session `AGENTS.md`/`MEMORY.md` 寫入造成的 prompt-cache 失效
- **解決問題**：session 內修改 AGENTS.md 導致 prompt cache 頻繁失效
- **影響**：降低 token 消耗，提升回應速度

---

## 安全性提升 (Security) - by Star Rating

### ⭐⭐⭐ Exec 混淆指令偵測 ([#8592](https://github.com/openclaw/openclaw/pull/8592))
- **用途**：在 exec allowlist 決策前偵測混淆指令，對混淆模式要求明確核准
- **解決問題**：惡意 prompt 可能透過混淆繞過 allowlist 檢查
- **影響**：防止 allowlist bypass 攻擊

### ⭐⭐⭐ ACP 權限自動核准強化 ([GitHub Release](https://github.com/openclaw/openclaw/releases/tag/v2026.2.23))
- **用途**：要求 trusted core tool ID、忽略不受信任的 `toolCall.kind` hints、將 `read` 自動核准限縮至 active working directory
- **解決問題**：未知 tool 名稱與超出範圍的檔案讀取可能被自動核准
- **影響**：防止 ACP 權限提升攻擊

### ⭐⭐⭐ Config 路徑遍歷防護 ([#24134](https://github.com/openclaw/openclaw/pull/24134))
- **用途**：`openclaw config get/set/unset` 路徑遍歷拒絕 prototype-key segments 與 inherited-property 遍歷；config 寫入使用 immutable path-copy 避免 caller 物件被修改
- **解決問題**：prototype pollution 與 config 物件意外修改風險
- **影響**：防止 prototype pollution 攻擊

### ⭐⭐ Skills XSS 防護 ([#12538](https://github.com/openclaw/openclaw/pull/12538))
- **用途**：`openai-image-gen` HTML gallery 生成時 escape user-controlled prompt、filename、output-path 值
- **解決問題**：生成的 `index.html` 可能包含 stored XSS
- **影響**：防止 stored XSS 攻擊

### ⭐⭐ Skills 打包安全強化 ([#24260](https://github.com/openclaw/openclaw/pull/24260), [#16959](https://github.com/openclaw/openclaw/pull/16959))
- **用途**：`skill-creator` 打包時跳過 symlink entries，拒絕 resolved path 逃出 skill root 的檔案
- **解決問題**：惡意 skill 可能透過 symlink 或路徑遍歷存取系統檔案
- **影響**：防止 skill 打包時的路徑逃逸攻擊

### ⭐⭐ OTEL 敏感資料遮蔽 ([#12542](https://github.com/openclaw/openclaw/pull/12542))
- **用途**：diagnostics-otel log body、attributes、error/reason span fields 在 OTLP export 前遮蔽 API keys、tokens、credential fields
- **解決問題**：敏感憑證可能透過 OTEL export 洩漏
- **影響**：防止憑證透過可觀測性管道洩漏

### ⭐ Config 敏感 key 遮蔽 ([GitHub Release](https://github.com/openclaw/openclaw/releases/tag/v2026.2.23))
- **用途**：`config.get` snapshots 遮蔽敏感動態 catchall keys（如 `env.*`、`skills.entries.*.env.*`），保留 round-trip restore 行為
- **解決問題**：`config get` 輸出可能暴露環境變數中的敏感值
- **影響**：防止敏感設定值意外洩漏

### ⭐ CI 安全 hook ([GitHub Release](https://github.com/openclaw/openclaw/releases/tag/v2026.2.23))
- **用途**：新增 pre-commit security hook 涵蓋 private-key 偵測與 production dependency auditing，並在 CI 中強制執行
- **解決問題**：私鑰或有漏洞的依賴可能被意外提交
- **影響**：在 CI 層面防止安全問題進入 codebase

---

## 錯誤修復 (Bug Fixes) - by Star Rating

### ⭐⭐⭐ Telegram Polling offset 修復 ([#10850](https://github.com/openclaw/openclaw/pull/10850), [#11347](https://github.com/openclaw/openclaw/pull/11347))
- **用途**：polling offset 以 bot identity 為 scope，重啟/錯誤恢復時使用單一 awaited runner-stop path
- **解決問題**：多 bot token 環境下 offset 互相污染，重啟時出現重複 poller
- **影響**：修復多 bot 環境下訊息重複處理問題

### ⭐⭐⭐ Agents 推理洩漏修復 ([#24626](https://github.com/openclaw/openclaw/pull/24626), [#24518](https://github.com/openclaw/openclaw/pull/24518))
- **用途**：`/reasoning off` 時抑制 reasoning-only delivery segments，阻止 suppressed `Reasoning:`/`<think>` 文字的 raw fallback resend
- **解決問題**：內部推理過程洩漏至 channel 回覆
- **影響**：防止 reasoning 內容意外暴露給使用者

### ⭐⭐⭐ Bedrock non-Anthropic prompt cache 修復 ([#20866](https://github.com/openclaw/openclaw/pull/20866))
- **用途**：非 Anthropic Bedrock models（Nova/Mistral）停用 prompt-cache retention，避免發送不支援的 cache metadata
- **解決問題**：Nova/Mistral 請求因不支援的 cache metadata 而失敗
- **影響**：修復 Bedrock Nova/Mistral 模型的請求錯誤

### ⭐⭐ WhatsApp groupAllowFrom 修復 ([#24670](https://github.com/openclaw/openclaw/pull/24670))
- **用途**：修復 `groupPolicy: "allowlist"` 未設定 `groups` 時的 sender filtering
- **解決問題**：allowlisted sender 的群組訊息被全部封鎖
- **影響**：修復 WhatsApp 群組 allowlist 設定失效問題

### ⭐⭐ Agents Compaction 修復 ([#24133](https://github.com/openclaw/openclaw/pull/24133), [#3479](https://github.com/openclaw/openclaw/pull/3479), [#10711](https://github.com/openclaw/openclaw/pull/10711))
- **用途**：修復 `/compact` 的 `agentDir` 傳遞、safeguard summarization 的 model metadata 傳遞、以及 summary 無法生成時取消 compaction（保留歷史而非截斷）
- **解決問題**：compaction 產生 `"Summary unavailable"` fallback 或截斷歷史
- **影響**：提升 compaction 可靠性，防止歷史資料遺失

### ⭐⭐ Agents Failover HTTP 5xx ([#20999](https://github.com/openclaw/openclaw/pull/20999))
- **用途**：HTTP 502/503/504 視為 failover-eligible transient timeout，觸發 fallback chain 切換 provider/model
- **解決問題**：上游服務中斷時持續重試同一失敗目標
- **影響**：提升上游服務中斷時的可用性

### ⭐⭐ Providers/Anthropic OAuth beta 修復 ([#10647](https://github.com/openclaw/openclaw/pull/10647), [#20354](https://github.com/openclaw/openclaw/pull/20354))
- **用途**：OAuth/subscription tokens（`sk-ant-oat-*`）跳過 `context-1m-*` beta injection
- **解決問題**：`params.context1m` 啟用時 OAuth token 收到 Anthropic 401 錯誤
- **影響**：修復 Anthropic OAuth 用戶的認證失敗

### ⭐⭐ OpenRouter reasoning_effort 修復 ([#24120](https://github.com/openclaw/openclaw/pull/24120))
- **用途**：注入 nested `reasoning.effort` 時移除衝突的 top-level `reasoning_effort`
- **解決問題**：reasoning models 收到 OpenRouter 400 payload-validation 錯誤
- **影響**：修復 OpenRouter reasoning model 的請求失敗

### ⭐ Sessions 大小寫正規化 ([#9561](https://github.com/openclaw/openclaw/pull/9561))
- **用途**：正規化 inbound mixed-case session keys，遷移 legacy case-variant entries 至單一 lowercase key
- **解決問題**：重複 session 與 TUI/WebUI 歷史記錄遺失
- **影響**：修復 session 管理的一致性問題

### ⭐ Telegram Reactions 修復 ([#20236](https://github.com/openclaw/openclaw/pull/20236), [#21001](https://github.com/openclaw/openclaw/pull/21001))
- **用途**：soft-fail reaction 錯誤、接受 snake_case `message_id`、fallback 至 inbound message-id context
- **解決問題**：DM reactions 不穩定，觸發 regeneration loops
- **影響**：提升 Telegram reaction 穩定性

### ⭐ Providers/Bedrock Anthropic cache 修復 ([#22303](https://github.com/openclaw/openclaw/pull/22303))
- **用途**：`amazon-bedrock/*anthropic.claude*` model refs 套用 Anthropic-Claude cacheRetention defaults
- **解決問題**：Bedrock 上的 Anthropic Claude 未正確套用 cache retention 設定
- **影響**：修復 Bedrock Anthropic Claude 的 prompt cache 行為

### ⭐ DashScope developer role 修復 ([#19130](https://github.com/openclaw/openclaw/pull/19130))
- **用途**：DashScope-compatible `openai-completions` endpoints 標記 `supportsDeveloperRole=false`，發送 `system` 而非 `developer` role
- **解決問題**：Qwen/DashScope API 不支援 `developer` role 導致請求失敗
- **影響**：修復 DashScope/Qwen API 相容性

### ⭐ Gateway WS 重複請求防護 ([#20168](https://github.com/openclaw/openclaw/pull/20168))
- **用途**：關閉 post-handshake `unauthorized role:*` 重複請求 flood，對重複拒絕 log 進行 sampling
- **解決問題**：單一惡意 client 可透過重複請求降低 gateway 回應速度
- **影響**：提升 gateway 在惡意連線下的穩定性

### ⭐ Gateway Restart PID 修復 ([#24696](https://github.com/openclaw/openclaw/pull/24696))
- **用途**：重啟健康檢查時將 child listener PIDs 視為 service runtime PID 所有
- **解決問題**：launchd/systemd 重啟時誤殺 child process 或重啟逾時
- **影響**：提升 gateway 重啟可靠性

### ⭐ Slack groupPolicy 繼承修復 ([#17579](https://github.com/openclaw/openclaw/pull/17579))
- **用途**：Slack account `groupPolicy` defaulting 移至 provider-level schema defaults
- **解決問題**：多 account 設定時 per-account `allowlist` 覆蓋 top-level 繼承
- **影響**：修復 Slack 多帳號群組政策繼承

### ⭐ Auto-reply inbound metadata 修復 ([#24373](https://github.com/openclaw/openclaw/pull/24373), [#21785](https://github.com/openclaw/openclaw/pull/21785))
- **用途**：修復 direct-chat metadata 隱藏邏輯；將動態 inbound `flags` 移至 user-context conversation info
- **解決問題**：群組 metadata 可見性問題；flag 變動導致 prompt-cache 逐 turn 失效
- **影響**：修復群組訊息分類與 cache 效率

### ⭐ Auto-reply session reset API key 洩漏修復 ([#24384](https://github.com/openclaw/openclaw/pull/24384), [#24409](https://github.com/openclaw/openclaw/pull/24409))
- **用途**：`/new` 和 `/reset` 確認訊息移除 auth-key labels
- **解決問題**：session reset 通知可能在 chat 輸出中暴露 API key prefix
- **影響**：防止 API key 資訊洩漏

### ⭐ Groq TPM 錯誤分類修復 ([#16176](https://github.com/openclaw/openclaw/pull/16176))
- **用途**：Groq TPM limit 錯誤不再被分類為 context overflow
- **解決問題**：Groq 流量限制觸發不必要的 overflow recovery
- **影響**：修復 Groq 限流時的錯誤處理

### ⭐ Channels/WhatsApp enabled key 修復 ([#24263](https://github.com/openclaw/openclaw/pull/24263))
- **用途**：config validation 接受 `channels.whatsapp.enabled`
- **解決問題**：channel setup 時出現 `Unrecognized key: "enabled"` 錯誤
- **影響**：修復 WhatsApp channel 設定驗證

---

## 總結

| 類別 | 3 顆星 | 2 顆星 | 1 顆星 | 摘要 |
|------|--------|--------|--------|------|
| 功能更新 | 2 | 3 | 3 | 新 provider、session 維護、per-agent 設定 |
| 安全性提升 | 3 | 3 | 2 | exec 防護、ACP 強化、XSS/OTEL 修復 |
| 錯誤修復 | 3 | 7 | 10 | Telegram、Bedrock、Agents、多 provider 修復 |
| **總計** | **8** | **13** | **15** | **36 項** |

**發佈日期**: 2026-02-23
**版本**: 2026.2.23
**狀態**: Production Ready
**GitHub Release**: [v2026.2.23](https://github.com/openclaw/openclaw/releases/tag/v2026.2.23)

---

*Closes [#103](https://github.com/thepagent/claw-info/issues/103)*
