# OpenClaw v2026.02.15 版本發佈說明

[GitHub Release](https://github.com/openclaw/openclaw/releases/tag/v2026.2.15)

## 概述

本版本包含以下主要變化：

- **功能更新**
  - ⭐⭐⭐ Discord Components v2 (按鈕、選單、模態框、附件檔案塊)
  - ⭐⭐⭐ Subagents: 支援巢狀子代理 (sub-sub-agents)
  - ⭐ Plugins: 暴露 llm_input 和 llm_output hook payload
  - ⭐ Slack/Discord/Telegram: 支援每頻道 ack 反應覆蓋
  - ⭐ Cron/Gateway: 支援完成 run webhook 遞送開關與 independent webhook auth
  - ⭐ Channels: 簡化核心與擴展的探針/token 解析基類

- **安全性提升**
  - ⭐⭐⭐ Sandbox: 將 SHA-1 雜湊取代為 SHA-256
  - ⭐⭐⭐ Sandbox/Security: 阻止危險的 Docker 設定
  - ⭐⭐⭐ Control UI: 防止助手名稱/頭像的 XSS
  - ⭐⭐ Security/Logging: 從錯誤訊息中脫敏 Telegram bot token
  - ⭐⭐ Gateway/Security: 從非管理用戶的狀態回應中脫敏敏感資訊
  - ⭐⭐ Gateway/Chat: 增強聊天.send 輸入訊息處理
  - ⭐⭐ Skills/Security: 限制下載安裝程式的 targetDir
  - ⭐⭐ Group chats: 每個 turn 注入群組聊天上下文
  - ⭐ Sandbox: 保留陣列順序於配置雜湊
  - ⭐ Gateway/Control UI: 維護 Control UI bypass mode 的運算元範圍
  - ⭐ LINE/Security: 缺少 channel token 或 secret 時關閉 webhook
  - ⭐ Skills/Linux: 增強 apt 系統上的 go 安裝程式的 fallback
  - ⭐ Web Fetch/Security: 限制下載回應主體大小
  - ⭐ Config/Gateway: 使敏感鍵白名單後綴匹配不區分大小寫
  - ⭐ Dev tooling: 增強 git pre-commit hook 防範惡意檔案名稱
  - ⭐ Gateway/Agent: 拒絕格式錯誤的 agent:-prefixed session keys
  - ⭐ Gateway/Send: 為 webchat 目標返回可操作錯誤
  - ⭐ Agents/Security: 清理工作區路徑
  - ⭐ Agents/Sandbox: 澄清系統提示路徑指導
  - ⭐ Agents/Context: 在提供商發現後應用 contextWindow 覆蓋
  - ⭐ Agents/OpenAI: 為直接 OpenAI Responses/Codex 強制 store=true
  - ⭐ Memory/FTS: Unicode-aware 的查詢令牌
  - ⭐ Agents: 為嵌入式 run 超時返回明確超時錯誤
  - ⭐ Browser/Agents: 當瀏覽器控制服務不可用時返回明確非重試指導

- **錯誤修復**
  - ⭐⭐⭐ Telegram: 為 DM 傳送省略 message_thread_id
  - ⭐⭐⭐ Telegram: 重試傳入媒體 getFile 呼叫
  - ⭐⭐⭐ Telegram: 原地完成 streaming preview 回覆
  - ⭐⭐ Memory/QMD: 為每個代理範圍管理的集合名稱
  - ⭐⭐ Telegram: 當 channels.telegram.streamMode 為 off 時禁用 block streaming
  - ⭐⭐ Discord: 當 runtime payload 省略 message.channelId 時保留 channel session 連續性
  - ⭐ Discord: 在多代理設置中根據技能名稱去重原生技能命令
  - ⭐ Discord: 確保 role allowlist 匹配使用原始 role ID
  - ⭐ Web UI/Agents: 在啟動完成後隱藏 Agents Files list 中的 BOOTSTRAP.md
  - ⭐ Auto-reply/WhatsApp/TUI/Web: 當最終助手訊息為 NO_REPLY 且訊息工具送信成功時，鏡像送信的訊息文字
  - ⭐ Gateway/Agent: 拒絕格式錯誤的 agent:-prefixed session keys
  - ⭐ Memory/QMD: 代理範圍的集合名稱

---

## 功能更新 (Features) - by Star Rating

### ⭐⭐⭐ Discord Components v2 支援
- **用途**：在 Discord 中支援原生互動代理提示，包括按鈕、選單、模態框和附件檔案塊
- **解決問題**：原先無法通過 Discord 使用原生互動功能
- **影響**：實現 Discord 的豐富互動代理提示能力 ([#17486](https://github.com/openclaw/openclaw/pull/17486))
- **相關**：Discord Components v2 UI + embeds passthrough + exec approval UX 改進

### ⭐⭐⭐ Subagents: 巢狀子代理 ([#14447](https://github.com/openclaw/openclaw/pull/14447))
- **用途**：支援巢狀子代理 (sub-sub-agents)，可配置深度
- **解決問題**：多層代理調用的支援不足
- **影響**：實現 sub-agents 能 spawn 自己的子代，包含 maxChildrenPerAgent 限制與深度感知工具策略

### ⭐ Plugins: LLM Input/Output Hook Payloads ([#16724](https://github.com/openclaw/openclaw/pull/16724))
- **用途**：暴露 llm_input 和 llm_output hook payload，使擴展可以觀察提示/輸入上下文和模型輸出使用細節
- **解決問題**：擴展無法觀測模型調用的內部細節
- **影響**：提升擴展可見性與除錯能力

### ⭐ Slack/Discord/Telegram: 每頻道 ack 反應覆蓋 ([#17092](https://github.com/openclaw/openclaw/pull/17092))
- **用途**：支援每頻道的 ack reaction 覆蓋，以支持平台特定的 emoji 格式
- **解決問題**：不同平台的 emoji 格式不兼容
- **影響**：提升平台特定的用戶體驗

### ⭐ Cron/Gateway: Webhook 遞送控制 ([#14535](https://github.com/openclaw/openclaw/pull/14535))
- **用途**：新增完成 run webhook 遞送開關 (notify) 與專用 webhook auth token 支援 (cron.webhookToken)
- **解決問題**：缺乏 webhook 遞送的精細控制
- **影響**：提升 webhook 安全性與靈活性

### ⭐ Channels: 減少探針/Token 解析冗餘 ([#16986](https://github.com/openclaw/openclaw/pull/16986))
- **用途**：在核心與擴展之間減去探針/token 解析基類的冗餘，同時保留每頻道錯誤類型
- **解決問題**：核心與擴展間的程式碼重複
- **影響**：提高代碼維護性與一致性

---

## 安全性提升 (Security) - by Star Rating

### ⭐⭐⭐ Sandbox: SHA-256 雜湊取代 SHA-1
- **用途**：將過時的 SHA-1 沙箱配置雜湊替換為 SHA-256
- **解決問題**：SHA-1 已被證明不夠安全
- **影響**：確保沙箱緩存標識的確定性與重建檢查

### ⭐⭐⭐ Sandbox/Security: 阻止危險的 Docker 設定
- **用途**：阻止危險的沙箱 Docker 設定 (bind mounts, host networking, unconfined seccomp/apparmor)
- **解決問題**：容器逃逸可能通過配置注入
- **影響**：防止容器逃逸攻擊

### ⭐⭐⭐ Control UI: 防止 XSS
- **用途**：通過移除內聯指令碼注入、以 JSON 提供 bootstrap config 和強制 script-src 'self' 來防止透過助手名稱/頭像的 stored XSS
- **解決問題**：助手名稱/頭像可能導致 XSS
- **影響**：防止 stored XSS 攻擊

### ⭐⭐ Security/Logging: Telegram Bot Token 脫敏
- **用途**：從錯誤訊息與未捕獲堆棧追蹤中脫敏 Telegram bot token
- **解決問題**：敏感密鑰可能意外洩露到日誌
- **影響**：防止密鑰洩露風險

### ⭐⭐ Gateway/Security: 敏感資訊脫敏
- **用途**：從非管理用戶的狀態回應中脫敏敏感會話/路徑細節
- **解決問題**：敏感資訊可能被非管理用戶讀取
- **影響**：實現最小權限原則 ([#8590](https://github.com/openclaw/openclaw/pull/8590))

### ⭐⭐ Gateway/Chat: 聊天.send 輸入處理增強
- **用途**：增強 chat.send 輸入訊息處理，拒絕 null bytes，去除不安全的控制字符，並在派發前將 Unicode 正規化為 NFC
- **解決問題**：非法字符可能導致處理錯誤
- **影響**：防止字符處理異常 ([#8593](https://github.com/openclaw/openclaw/pull/8593))

### ⭐⭐ Skills/Security: 限制安裝程序 targetDir
- **用途**：限制下載安裝程序的 targetDir 到每技能 tools 目錄
- **解決問題**：可能濫用任意文件寫入
- **影響**：防止任意文件寫入漏洞

### ⭐⭐ Group chats: 每個 turn 注入群組聊天上下文
- **用途**：每次 turn 注入群組聊天上下文 (名稱、參與者、回覆指導)
- **解決問題**：模型失去對群組的意識，錯誤地使用 message tool 發送到同一群組
- **影響**：確保群組聊天的正確上下文感知 ([#14447](https://github.com/openclaw/openclaw/pull/14447))

### ⭐ Sandbox: 保留陣列順序於配置雜湊
- **用途**：在配置雜湊中保留陣列順序，使順序敏感的 Docker 瀏覽器設置能正確觸發容器重建
- **解決問題**：陣列順序變更未觸發容器重建
- **影響**：確保配置變更被正確檢測

### ⭐ Gateway/Control UI: 操作範圍保留
- **用途**：當設備身份不可用時，保留 Control UI bypass mode 的操作範圍設定
- **解決問題**：代理端失敗時導致 false missing scope 失敗
- **影響**：防止 LAN/HTTP 代理會話的誤失敗 ([#17682](https://github.com/openclaw/openclaw/pull/17682))

### ⭐ LINE/Security: Webhook 啟動失敗關閉
- **用途**：當 channel token 或 channel secret 缺失時，webhook 啟動時 fail closed
- **解決問題**：LINE 帳戶可能被錯誤地認為已配置
- **影響**：防止未正確配置的 LINE 帳戶運行 ([#17587](https://github.com/openclaw/openclaw/pull/17587))

### ⭐ Skills/Linux: 增強 go 安裝程序
- **用途**：在 apt-based 系統上增強 go 安裝程序的 fallback，安全處理 root/no-sudo 環境
- **解決問題**：無 sudo 權限時安裝失敗
- **影響**：改善 Linux 環境下的安裝可靠性 ([#17687](https://github.com/openclaw/openclaw/pull/17687))

### ⭐ Web Fetch/Security: 限制回應主體大小
- **用途**：在 HTML 解析前限制下載的回應主體大小
- **解決問題**：過大或深層嵌套的頁面可能導致記憶體耗盡
- **影響**：防止記憶體耗盡攻擊

### ⭐ Config/Gateway: 敏感鍵匹配不區分大小寫
- **用途**：使敏感鍵白名單後綴匹配不區分大小寫，同時保留 passwordFile 路徑豁免
- **解決問題**：非秘密配置值 (如 maxTokens) 被誤判
- **影響**：防止誤判而導致非敏感配置被錯誤脱敏 ([#16042](https://github.com/openclaw/openclaw/pull/16042))

### ⭐ Dev Tooling: Git Pre-commit Hook 增強
- **用途**：增強 git pre-commit hook 以對抗恶意文件名稱選項注入 (如 --force)
- **解決問題**：惡意文件名稱可能導致意外提交忽略文件
- **影響**：防止 git 命令注入漏洞

### ⭐ Gateway/Agent: 拒絕格式錯誤的 Session Keys
- **用途**：拒絕格式錯誤的 agent:-prefixed session keys (如 agent:main)
- **解決問題**：意外的跨 session 路由
- **影響**：防止意外的跨 session 路由 ([#15707](https://github.com/openclaw/openclaw/pull/15707))

### ⭐ Gateway/Send: Webchat 目��錯誤處理
- **用途**：當 send 目標為內部 only 的 webchat 時，返回可操作錯誤，引導調用者使用 chat.send 或可遞送的頻道
- **解決問題**：內部渠道的誤用
- **影響**：防止混淆的渠道使用 ([#15703](https://github.com/openclaw/openclaw/pull/15703))

### ⭐ Agents/Security: 清理工作區路徑
- **用途**：在嵌入 LLM 提示前清理工作區路徑 (去除 Unicode 控制/格式字符)
- **解決問題**：惡意目錄名稱可能導致指令注入
- **影響**：防止指令注入攻擊

### ⭐ Agents/Sandbox: 澄清系統提示路徑
- **用途**：澄清系統提示路徑指導，使 sandbox bash/exec 使用容器路徑 (如 /workspace)，而檔案工具保持主機橋接映射
- **解決問題**：主機絕對路徑導致第一次嘗試失敗
- **影響**：避免路徑解析錯誤 ([#17693](https://github.com/openclaw/openclaw/pull/17693))

### ⭐ Agents/Context: ContextWindow 覆蓋後置應用
- **用途**：在提供商發現後應用配置的 model contextWindow 覆蓋
- **解決問題**：lookupContextTokens() 忽略操作器配置值
- **影響**：確保配置值被正確使用 ([#17404](https://github.com/openclaw/openclaw/pull/17404))

### ⭐ Agents/OpenAI: 為直接 OpenAI Responses/Codex 強制 store=true
- **用途**：為直接 OpenAI Responses/Codex 強制 store=true，以保留多輪 server-side 對話狀態
- **解決問題**：缺少 store=true 導致對話狀態遺失
- **影響**：確保 OpenAI Responses/Codex 的多輪對話State ([#16803](https://github.com/openclaw/openclaw/pull/16803))

### ⭐ Memory/FTS: Unicode-aware 查詢
- **用途**：使 buildFtsQuery Unicode-aware，這樣非 ASCII 查詢 (包括 CJK) 產生關鍵字記號而不是回退到僅 vector search
- **解決問題**：非 ASCII 查詢回退到向量搜尋
- **影響**：提升非英文字元的搜尋品質 ([#17672](https://github.com/openclaw/openclaw/pull/17672))

### ⭐ Agents: 為嵌入式 run 超時返回明確超時錯誤
- **用途**：在嵌入式 run 超時前產生任何 payload 時，返回明確的超時錯誤回應
- **解決問題**：緩慢的快取刷新轉換期間的 silent dropped turns
- **影響**：防止 silent dropped turns ([#16659](https://github.com/openclaw/openclaw/pull/16659))

### ⭐ Browser/Agents: 當瀏覽器控制服務不可用時返回明確非重試指導
- **用途**：當瀏覽器控制服務不可用時，返回明確的非重試指導 (而不是 "try again")
- **解決問題**：模型在反覆瀏覽器工具調用時直到超時
- **影響**：防止無限循環 ([#17673](https://github.com/openclaw/openclaw/pull/17673))

---

## 錯誤修復 (Bug Fixes) - by Star Rating

### ⭐⭐⭐ Telegram: DM 傳送省略 message_thread_id
- **用途**：為 DM 傳送與草稿預覽省略 message_thread_id，並保留論壇主題處理
- **解決問題**：DM 傳送時出現 400 Bad Request: message thread not found
- **影響**：修復 DM 傳送失敗 ([#10942](https://github.com/openclaw/openclaw/pull/10942))

### ⭐⭐⭐ Telegram: 重試傳入媒體getFile
- **用途**：重試傳入媒體 getFile 呼叫 (3 次重試，帶退避)，並在重試失敗時溫和回退到佔位符處理
- **解決問題**：傳輸 Telegram 網路錯誤時傳入媒體/語音訊息遺失
- **影響**：防止媒體訊息遺失 ([#16154](https://github.com/openclaw/openclaw/pull/16154))

### ⭐⭐⭐ Telegram: 原地完成 Streaming Preview 回覆
- **用途**：原地完成 streaming preview 回覆，而不是發送第二個最終訊息
- **解決問題**：streaming 完成時出現重複的 Telegram 助手輸出
- **影響**：避免重複訊息 ([#17218](https://github.com/openclaw/openclaw/pull/17218))

### ⭐⭐ Memory/QMD: 範圍聚集名稱
- **用途**：為每個代理範圍管理的集合名稱，並在註冊前預創建 glob-backed 集合目錄
- **解決問題**：跨代理集合衝突與新工作區的 ENOENT 失敗
- **影響**：防止集合衝突與啟動失敗 ([#17194](https://github.com/openclaw/openclaw/pull/17194))

### ⭐⭐ Telegram: 禁用 Block Streaming
- **用途**：當 channels.telegram.streamMode 為 off 時禁用 block streaming
- **解決問題**：新行/內容塊回應在 streamMode = off 時被分割成多個訊息
- **影響**：防止非流式傳輸的訊息分割 ([#17679](https://github.com/openclaw/openclaw/pull/17679))

### ⭐⭐ Discord: 保留 Channel Session 連續性
- **用途**：當 runtime payload 省略 message.channelId 時，回退到 event/raw channel_id 值進行路由/session keys
- **解決問題**：相同頻道的訊息在 turn/restarts 間失去歷史
- **影響**：保持 channel session 連續性 ([#17622](https://github.com/openclaw/openclaw/pull/17622))

### ⭐ Discord: 根據技能名稱去重原生技能命令
- **用途**：在多代理設置中根據技能名稱去重原生技能命令
- **解決問題**：出現帶有 _2 後綴的重複斜線命令
- **影響**：避免命令重複 ([#17365](https://github.com/openclaw/openclaw/pull/17365))

### ⭐ Discord: Role Allowlist 匹配原始 Role ID
- **用途**：確保 role allowlist 匹配使用原始 role ID 進行訊息路由授權
- **解決問題**：role ID 匹配不正確
- **影響**：確保正確的授權機制

### ⭐ Web UI/Agents: 隱藏完成启動後的 BOOTSTRAP.md
- **用途**：在启動完成後隱藏 Agents Files list 中的 BOOTSTRAP.md
- **解決問題**：已完成工作區的混淆 missing-file 警告
- **影響**：改善啟動工作區體驗 ([#17491](https://github.com/openclaw/openclaw/pull/17491))

### ⭐ Auto-reply/WhatsApp/TUI/Web: NO_REPLY 反饋
- **用途**：當最終助手訊息為 NO_REPLY 且訊息工具送信成功時，將送信的訊息文字鏡像到 session-visible 助手輸出
- **解決問題**：TUI/Web 顯示 NO_REPLY 占位符
- **影響**：改善 TUI/Web 的使用者體驗 ([#7010](https://github.com/openclaw/openclaw/pull/7010))

### ⭐ Gateway/Agent: 拒絕格式錯誤的 Session Keys
- **用途**：在 agent 和 agent.identity.get 中拒绝格式错误的 agent:-prefixed session keys (如 agent:main)
- **解決問題**：silent 到達 default agent 的跨 session 路由
- **影響**：防止意外的跨 session 路由 ([#15707](https://github.com/openclaw/openclaw/pull/15707))

### ⭐ Memory/QMD: 代理範圍的集合名稱
- **用途**：為每個代理範圍管理的集合名稱，並在註冊前預創建 glob-backed 集合目錄
- **解決問題**：跨代理集合衝突與新工作區的 ENOENT 失敗
- **影響**：防止集合衝突與啟動失敗

---

## 總結

| 類別 | 3 顆星 | 2 顆星 | 1 顆星 | 摘要 |
|------|--------|--------|--------|------|
| 功能更新 | 2 | 0 | 4 | Discord Components v2、Subagents、Plugins Hooks |
| 安全性 | 3 | 4 | 12 | Sandbox 增強、密鑰脫敏、Path 清理、XSS 防護 |
| 錯誤修復 | 3 | 2 | 7 | Telegram DM、Discord Session、Memory QMD |
| **總計** | **8** | **6** | **23** | **37 項改進** |

**發佈日期**: 2026-02-15  
**版本**: 2026.02.15  
**狀態**: Production Ready  
**GitHub Release**: [v2026.2.15](https://github.com/openclaw/openclaw/releases/tag/v2026.2.15)
